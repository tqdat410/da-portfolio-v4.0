This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitignore
.prettierignore
.prettierrc
babel.config.json
docs/codebase-summary.md
docs/project-overview-pdr.md
eslint.config.mjs
jest.config.js
jest.setup.js
logo_full.png
next.config.ts
nul
package.json
postcss.config.mjs
public/file.svg
public/globe.svg
public/next.svg
public/robots.txt
public/vercel.svg
public/window.svg
README.md
ref-water-like-ripples/index.html
ref-water-like-ripples/script.js
ref-water-like-ripples/shaders.js
ref-water-like-ripples/styles.css
src/app/favicon.ico
src/app/globals.css
src/app/layout.tsx
src/app/manifest.ts
src/app/page.tsx
src/app/sitemap.ts
src/components/effects/Caustics.tsx
src/components/effects/EcosystemLayer.tsx
src/components/effects/index.tsx
src/components/effects/RainParticles.tsx
src/components/icons/index.tsx
src/components/layout/index.ts
src/components/layout/Navbar.tsx
src/components/layout/Section.tsx
src/components/layout/TopToolbar.tsx
src/components/particles/AmbientParticles.tsx
src/components/particles/index.tsx
src/components/sections/About/About.test.tsx
src/components/sections/About/About.tsx
src/components/sections/About/SkillsGrid.test.tsx
src/components/sections/About/SkillsGrid.tsx
src/components/sections/Contact/Contact.test.tsx
src/components/sections/Contact/Contact.tsx
src/components/sections/index.ts
src/components/sections/Projects/ProjectCard.tsx
src/components/sections/Projects/ProjectModal.tsx
src/components/sections/Projects/Projects.test.tsx
src/components/sections/Projects/Projects.tsx
src/components/story/HeroStory.tsx
src/components/story/index.ts
src/components/story/RoleCarousel.tsx
src/components/story/StorySection.tsx
src/components/utils/AxeReporter.tsx
src/components/water/AnimatedWaterCanvas.tsx
src/components/water/BackgroundWaves.tsx
src/components/water/index.tsx
src/components/water/TextCanvas.ts
src/components/water/WaterCanvas.tsx
src/components/water/WaterPlane.tsx
src/content/index.ts
src/content/portfolio.ts
src/hooks/index.ts
src/hooks/useActiveSection.ts
src/hooks/useFluidSimulation.ts
src/hooks/useGSAP.ts
src/hooks/useMediaQuery.ts
src/hooks/useMounted.ts
src/hooks/useMousePosition.ts
src/hooks/usePerformanceMonitor.ts
src/hooks/useReducedMotion.ts
src/hooks/useScrollProgress.ts
src/hooks/useScrollStory.ts
src/lib/utils.ts
src/shaders/particles.ts
src/shaders/rain.ts
src/shaders/simulation.ts
src/shaders/water.ts
src/styles/navbar.css
src/types/content.ts
tsconfig.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="README.md">
# DaPortfolio v4.0

Personal portfolio website built with Next.js 16, React 19, Three.js, and advanced GPU-accelerated visual effects.

## Features

- **GPU Water Simulation** - Ping-pong FBO technique with pressure-velocity wave equation
- **Rain Particle System** - GPU-based falling particles with wind drift
- **Ambient Particles** - Floating organic particles with Perlin noise
- **Caustics Effect** - Underwater light patterns via shader
- **GSAP Scroll Animations** - ScrollTrigger-powered section transitions
- **Accessibility First** - Skip links, reduced motion support, focus management, axe-core compliance
- **Silver Mist Design** - Elegant slate color palette with serif typography

## Tech Stack

| Technology | Version | Purpose |
|-----------|---------|---------|
| Next.js | 16.1.1 | App Router, SSR, optimization |
| React | 19.2.3 | UI framework |
| Three.js | 0.182.0 | 3D graphics |
| React Three Fiber | 9.5.0 | React renderer for Three.js |
| React Three Drei | 10.7.7 | Reusable 3D components |
| GSAP | 3.14.2 | Scroll animations |
| Tailwind CSS | v4 | Utility styling |
| TypeScript | 5 | Type safety |
| Jest | 30.2.0 | Unit testing |

## Quick Start

```bash
# Install dependencies
npm install

# Run development server
npm run dev

# Open browser
# http://localhost:3000
```

## Project Structure

```
src/
├── app/                 # Next.js App Router
├── components/          # React components
│   ├── effects/        # Visual effects (Caustics, Rain, etc.)
│   ├── water/          # Water simulation components
│   ├── particles/      # Particle system components
│   ├── layout/         # Layout components (Navbar, Section)
│   ├── sections/       # Portfolio sections (About, Projects, Contact)
│   ├── story/          # Hero story components
│   └── icons/          # SVG icons
├── content/            # Portfolio content data (portfolio.ts)
├── hooks/              # Custom React hooks
├── shaders/            # GLSL shader code
├── lib/                # Utility functions
├── styles/             # Global CSS
└── types/              # TypeScript interfaces
```

## Available Scripts

```bash
npm run dev              # Start development server
npm run build            # Production build
npm run start            # Start production server
npm run lint             # Run ESLint
npm run test             # Run Jest tests
npm run test:coverage    # Test coverage report
npm run format           # Format code with Prettier
npm run analyze          # Bundle size analysis
```

## Key Technologies Explained

### Water Simulation
Uses GPU-accelerated fluid dynamics with ping-pong framebuffer objects (FBOs). Implements pressure-velocity wave equation for realistic ripple propagation.

### Particle Systems
- **Rain**: GPU-based falling particles with wind drift and collision
- **Ambient**: Floating particles driven by Perlin noise for organic motion

### Shader Pipeline
Custom GLSL shaders for:
- Water surface simulation and rendering
- Particle updates and rendering
- Caustics light patterns
- Bloom and post-processing effects

### Animation Framework
GSAP ScrollTrigger manages scroll-based animations with performance monitoring and reduced motion support.

## Styling & Design

- **Design System**: Silver Mist (slate-based palette)
- **Typography**: Luxurious Roman (serif), Style Script (display)
- **Layout**: Responsive grid system via Tailwind CSS v4
- **Accessibility**: WCAG 2.1 AA compliance, high contrast ratios

## Documentation

Complete documentation available in `/docs`:
- `project-overview-pdr.md` - Project requirements and goals
- `codebase-summary.md` - Technical overview
- `code-standards.md` - Coding conventions
- `system-architecture.md` - Component architecture
- `design-guidelines.md` - Design system details
- `project-roadmap.md` - Development roadmap

## Performance

- Target: 60 FPS on modern hardware
- Performance monitoring via `usePerformanceMonitor` hook
- Automatic effect reduction on low-end devices
- Optimized shader compilation and texture management

## Accessibility

- Skip to main content links
- Full keyboard navigation
- Screen reader support
- Reduced motion preferences respected
- Focus management and visible focus rings
- 44px+ touch targets on mobile

## Browser Support

- Chrome/Edge 120+
- Firefox 122+
- Safari 16+
- Mobile browsers (iOS Safari 16+, Chrome Android)

## Contributing

Follow standards in `./docs/code-standards.md` before submitting PRs.

## License

Private project - all rights reserved.
</file>

<file path=".gitignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/versions

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# env files (can opt-in for committing if needed)
.env*

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts
</file>

<file path=".prettierignore">
node_modules
.next
out
build
dist
*.md
</file>

<file path=".prettierrc">
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": false,
  "printWidth": 100,
  "tabWidth": 2,
  "useTabs": false,
  "plugins": []
}
</file>

<file path="eslint.config.mjs">
import { defineConfig, globalIgnores } from "eslint/config";
import nextVitals from "eslint-config-next/core-web-vitals";
import nextTs from "eslint-config-next/typescript";
import prettierConfig from "eslint-config-prettier";

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  prettierConfig,
  // Override default ignores of eslint-config-next.
  globalIgnores([
    // Default ignores of eslint-config-next:
    ".next/**",
    "out/**",
    "build/**",
    "next-env.d.ts",
  ]),
]);

export default eslintConfig;
</file>

<file path="jest.config.js">
module.exports = {
  testEnvironment: 'jsdom',
  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],
  moduleNameMapper: {
    '^@/(.*)$': '<rootDir>/src/$1',
  },
  transform: {
    '^.+\\.(ts|tsx|js|jsx)$': 'babel-jest',
  },
};
</file>

<file path="postcss.config.mjs">
const config = {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};

export default config;
</file>

<file path="public/file.svg">
<svg fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 13.5V5.41a1 1 0 0 0-.3-.7L9.8.29A1 1 0 0 0 9.08 0H1.5v13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5m-1.5 0v-7H8v-5H3v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1M9.5 5V2.12L12.38 5zM5.13 5h-.62v1.25h2.12V5zm-.62 3h7.12v1.25H4.5zm.62 3h-.62v1.25h7.12V11z" clip-rule="evenodd" fill="#666" fill-rule="evenodd"/></svg>
</file>

<file path="public/globe.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.27 14.1a6.5 6.5 0 0 0 3.67-3.45q-1.24.21-2.7.34-.31 1.83-.97 3.1M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.48-1.52a7 7 0 0 1-.96 0H7.5a4 4 0 0 1-.84-1.32q-.38-.89-.63-2.08a40 40 0 0 0 3.92 0q-.25 1.2-.63 2.08a4 4 0 0 1-.84 1.31zm2.94-4.76q1.66-.15 2.95-.43a7 7 0 0 0 0-2.58q-1.3-.27-2.95-.43a18 18 0 0 1 0 3.44m-1.27-3.54a17 17 0 0 1 0 3.64 39 39 0 0 1-4.3 0 17 17 0 0 1 0-3.64 39 39 0 0 1 4.3 0m1.1-1.17q1.45.13 2.69.34a6.5 6.5 0 0 0-3.67-3.44q.65 1.26.98 3.1M8.48 1.5l.01.02q.41.37.84 1.31.38.89.63 2.08a40 40 0 0 0-3.92 0q.25-1.2.63-2.08a4 4 0 0 1 .85-1.32 7 7 0 0 1 .96 0m-2.75.4a6.5 6.5 0 0 0-3.67 3.44 29 29 0 0 1 2.7-.34q.31-1.83.97-3.1M4.58 6.28q-1.66.16-2.95.43a7 7 0 0 0 0 2.58q1.3.27 2.95.43a18 18 0 0 1 0-3.44m.17 4.71q-1.45-.12-2.69-.34a6.5 6.5 0 0 0 3.67 3.44q-.65-1.27-.98-3.1" fill="#666"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>
</file>

<file path="public/next.svg">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 394 80"><path fill="#000" d="M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z"/><path fill="#000" d="M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z"/></svg>
</file>

<file path="public/robots.txt">
User-agent: *
Allow: /

Sitemap: https://tranquocdat.com/sitemap.xml
</file>

<file path="public/vercel.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1155 1000"><path d="m577.3 0 577.4 1000H0z" fill="#fff"/></svg>
</file>

<file path="public/window.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5h13v10a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1zM0 1h16v11.5a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5zm3.75 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5M7 4.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m1.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5" fill="#666"/></svg>
</file>

<file path="ref-water-like-ripples/index.html">
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GentleRain Water Simulation | Codegrid</title>
    <link rel="stylesheet" href="./styles.css" />
</head>
<body>
    <nav>
        <div class="logo">
            <p>Soft Horizon</p>
        </div>
        <div class="nav-items">
            <p>Product</p>
            <p>Concept</p>
            <p>Partners</p>
            <button>Try now</button>
        </div>
    </nav>

    <footer>
        <h1>Lorem ipsum dolor</h1>
        <div class="footer-links">
            <p>Sign Up</p>
            <p>Log In</p>
        </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="./script.js"></script>
</body>
</html>
</file>

<file path="ref-water-like-ripples/script.js">
const simulationVertexShader = `
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`;

const simulationFragmentShader = `
uniform sampler2D textureA;
uniform vec2 mouse;
uniform vec2 resolution;
uniform float time;
uniform int frame;
varying vec2 vUv;

const float delta = 1.4;

void main() {
    vec2 uv = vUv;
    if (frame == 0) {
        gl_FragColor = vec4(0.0);
        return;
    }

    vec4 data = texture2D(textureA, uv);
    float pressure = data.x;
    float pVel = data.y;

    vec2 texelSize = 1.0 / resolution;
    float p_right = texture2D(textureA, uv + vec2(texelSize.x, 0.0)).x;
    float p_left = texture2D(textureA, uv + vec2(-texelSize.x, 0.0)).x;
    float p_up = texture2D(textureA, uv + vec2(0.0, texelSize.y)).x;
    float p_down = texture2D(textureA, uv + vec2(0.0, -texelSize.y)).x;

    if (uv.x <= texelSize.x) p_left = p_right;
    if (uv.x >= 1.0 - texelSize.x) p_right = p_left;
    if (uv.y <= texelSize.y) p_down = p_up;
    if (uv.y >= 1.0 - texelSize.y) p_up = p_down;

    // Enhanced wave equation matching ShaderToy
    pVel += delta * (-2.0 * pressure + p_right + p_left) / 4.0;
    pVel += delta * (-2.0 * pressure + p_up + p_down) / 4.0;

    pressure += delta * pVel;

    pVel -= 0.005 * delta * pressure;

    pVel *= 1.0 - 0.002 * delta;
    pressure *= 0.999;

    vec2 mouseUV = mouse / resolution;
    if(mouse.x > 0.0) {
        float dist = distance(uv, mouseUV);
        if(dist <= 0.01) { // Wider radius for softer ripples
            pressure += 0.3 * (1.0 - dist / 0.01); // Gentle intensity
        }
    }

    gl_FragColor = vec4(pressure, pVel,
        (p_right - p_left) / 2.0,
        (p_up - p_down) / 2.0);
}
`;

const renderVertexShader = `
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`;

const renderFragmentShader = `
uniform sampler2D textureA;
uniform sampler2D textureB;
varying vec2 vUv;

void main() {
    vec4 data = texture2D(textureA, vUv);

    // Reduced distortion for a smoother, glass-like look
    vec2 distortion = 0.5 * data.zw; 
    vec4 color = texture2D(textureB, vUv + distortion);

    vec3 normal = normalize(vec3(-data.z * 2.0, 0.5, -data.w * 2.0));
    vec3 lightDir = normalize(vec3(-3.0, 10.0, 3.0));
    
    // Softer specular highlight
    float specular = pow(max(0.0, dot(normal, lightDir)), 60.0) * 1.0;

    gl_FragColor = color + vec4(specular);
}
`;

document.addEventListener("DOMContentLoaded", () => {
    const scene = new THREE.Scene();
    const simScene = new THREE.Scene();

    const simCamera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);
    const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);
    
    // Zoom in to see details better
    const zoom = 2.5; 
    camera.zoom = zoom;
    camera.updateProjectionMatrix();

    const renderer = new THREE.WebGLRenderer({
        antialias: true,
        alpha: true,
        preserveDrawingBuffer: true,
    });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    const mouse = new THREE.Vector2();
    let frame = 0;

    const width = window.innerWidth * window.devicePixelRatio;
    const height = window.innerHeight * window.devicePixelRatio;
    const options = {
        format: THREE.RGBAFormat,
        type: THREE.FloatType, // Note: FloatType requires extension checks in WebGL1, but usually works on desktop.
        minFilter: THREE.LinearFilter,
        magFilter: THREE.LinearFilter,
        stencilBuffer: false,
        depthBuffer: false,
    };
    let rtA = new THREE.WebGLRenderTarget(width, height, options);
    let rtB = new THREE.WebGLRenderTarget(width, height, options);

    const simMaterial = new THREE.ShaderMaterial({
        uniforms: {
            textureA: { value: null },
            mouse: { value: mouse },
            resolution: { value: new THREE.Vector2(width, height) },
            time: { value: 0 },
            frame: { value: 0 },
        },
        vertexShader: simulationVertexShader,
        fragmentShader: simulationFragmentShader,
    });

    const renderMaterial = new THREE.ShaderMaterial({
        uniforms: {
            textureA: { value: null },
            textureB: { value: null },
        },
        vertexShader: renderVertexShader,
        fragmentShader: renderFragmentShader,
        transparent: true,
    });

    const plane = new THREE.PlaneGeometry(2, 2);
    const simQuad = new THREE.Mesh(plane, simMaterial);
    const renderQuad = new THREE.Mesh(plane, renderMaterial);

    simScene.add(simQuad);
    scene.add(renderQuad);

    const canvas = document.createElement("canvas");
    canvas.width = width;
    canvas.height = height;
    const ctx = canvas.getContext("2d", { alpha: true });

    ctx.fillStyle = "#fb7427";
    ctx.fillRect(0, 0, width, height);

    const fontSize = Math.round(250 * window.devicePixelRatio);
    ctx.fillStyle = "#fef4b8";
    ctx.font = `bold ${fontSize}px "Test Söhne", sans-serif`; 
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.textRendering = "geometricPrecision";
    ctx.imageSmoothingEnabled = true;
    ctx.imageSmoothingQuality = "high";
    ctx.fillText("softhorizon", width / 2, height / 2);

    const textTexture = new THREE.CanvasTexture(canvas);
    textTexture.minFilter = THREE.LinearFilter;
    textTexture.magFilter = THREE.LinearFilter;
    textTexture.format = THREE.RGBAFormat;

    window.addEventListener("resize", () => {
        const newWidth = window.innerWidth * window.devicePixelRatio;
        const newHeight = window.innerHeight * window.devicePixelRatio;

        renderer.setSize(window.innerWidth, window.innerHeight);
        rtA.setSize(newWidth, newHeight);
        rtB.setSize(newWidth, newHeight);
        simMaterial.uniforms.resolution.value.set(newWidth, newHeight);
        
        canvas.width = newWidth;
        canvas.height = newHeight;
        ctx.fillStyle = "#fb7427";
        ctx.fillRect(0, 0, newWidth, newHeight);
        
        const newFontSize = Math.round(250 * window.devicePixelRatio);
        ctx.fillStyle = "#fef4b8";
        ctx.font = `bold ${newFontSize}px "Test Söhne", sans-serif`;
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.fillText("softhorizon", newWidth / 2, newHeight / 2);
        
        textTexture.needsUpdate = true;
    });

    renderer.domElement.addEventListener("mousemove", (e) => {
        // Map screen coordinates 0..1
        let u = e.clientX / window.innerWidth;
        let v = 1 - (e.clientY / window.innerHeight); 

        // Apply zoom transformation to UVs
        // Center of zoom is 0.5, 0.5
        u = (u - 0.5) / zoom + 0.5;
        v = (v - 0.5) / zoom + 0.5;

        mouse.x = u * width;
        mouse.y = v * height;
    });

    renderer.domElement.addEventListener("mouseleave", () => {
        mouse.set(0, 0);
    });

    const animate = () => {
        simMaterial.uniforms.frame.value = frame++;
        simMaterial.uniforms.time.value = performance.now() / 1000;

        simMaterial.uniforms.textureA.value = rtA.texture;
        renderer.setRenderTarget(rtB);
        renderer.render(simScene, simCamera); // Use simCamera for physics

        renderMaterial.uniforms.textureA.value = rtB.texture;
        renderMaterial.uniforms.textureB.value = textTexture;
        renderer.setRenderTarget(null);
        renderer.render(scene, camera); // Use zoomed camera for display

        const temp = rtA;
        rtA = rtB;
        rtB = temp;

        requestAnimationFrame(animate);
    };

    animate();
});
</file>

<file path="ref-water-like-ripples/shaders.js">
export const simulationVertexShader = `
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`;

export const simulationFragmentShader = `
uniform sampler2D textureA;
uniform vec2 mouse;
uniform vec2 resolution;
uniform float time;
uniform int frame;
varying vec2 vUv;

const float delta = 1.4;

void main() {
    vec2 uv = vUv;
    if (frame == 0) {
        gl_FragColor = vec4(0.0);
        return;
    }

    vec4 data = texture2D(textureA, uv);
    float pressure = data.x;
    float pVel = data.y;

    vec2 texelSize = 1.0 / resolution;
    float p_right = texture2D(textureA, uv + vec2(texelSize.x, 0.0)).x;
    float p_left = texture2D(textureA, uv + vec2(-texelSize.x, 0.0)).x;
    float p_up = texture2D(textureA, uv + vec2(0.0, texelSize.y)).x;
    float p_down = texture2D(textureA, uv + vec2(0.0, -texelSize.y)).x;

    if (uv.x <= texelSize.x) p_left = p_right;
    if (uv.x >= 1.0 - texelSize.x) p_right = p_left;
    if (uv.y <= texelSize.y) p_down = p_up;
    if (uv.y >= 1.0 - texelSize.y) p_up = p_down;

    // Enhanced wave equation matching ShaderToy
    pVel += delta * (-2.0 * pressure + p_right + p_left) / 4.0;
    pVel += delta * (-2.0 * pressure + p_up + p_down) / 4.0;

    pressure += delta * pVel;

    pVel -= 0.005 * delta * pressure;

    pVel *= 1.0 - 0.002 * delta;
    pressure *= 0.999;

    vec2 mouseUV = mouse / resolution;
    if(mouse.x > 0.0) {
        float dist = distance(uv, mouseUV);
        if(dist <= 0.02) { // Smaller radius for more precise ripples
            pressure += 2.0 * (1.0 - dist / 0.02); // Increased intensity
        }
    }

    gl_FragColor = vec4(pressure, pVel,
        (p_right - p_left) / 2.0,
        (p_up - p_down) / 2.0);
}
`;

export const renderVertexShader = `
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`;

export const renderFragmentShader = `
uniform sampler2D textureA;
uniform sampler2D textureB;
varying vec2 vUv;

void main() {
    vec4 data = texture2D(textureA, vUv);

    vec2 distortion = 0.3 * data.zw;
    vec4 color = texture2D(textureB, vUv + distortion);

    vec3 normal = normalize(vec3(-data.z * 2.0, 0.5, -data.w * 2.0));
    vec3 lightDir = normalize(vec3(-3.0, 10.0, 3.0));
    float specular = pow(max(0.0, dot(normal, lightDir)), 60.0) * 1.5;

    gl_FragColor = color + vec4(specular);
}
`;
</file>

<file path="ref-water-like-ripples/styles.css">
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    width: 100%;
    height: 100%;
    background-color: #fb7427;
    color: #fef4b8;
}

h1 {
    font-size: 36px;
    font-weight: 400;
    line-height: 1.25;
}

p{
    font-size: 15px;
    line-height: 1.25;
}

nav {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    padding: 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 2;
}

.nav-items{
    display: flex;
    align-items: center;
    gap: 2em;
}

button {
    outline: none;
    border: 2px solid #fef4b8;
    border-radius: 2em;
    background-color: transparent;
    color: #fef4b8;
    padding: 1rem 2rem;
}

footer {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100vw;
    padding: 2em;
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    z-index: 2;
}

footer h1 {
    width: 40%;
}

.footer-links {
    display: flex;
    gap: 2em;
}

canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
}
</file>

<file path="src/app/layout.tsx">
import type { Metadata, Viewport } from "next";
import React from "react";
import { Geist, Geist_Mono } from "next/font/google";
import { WaterEffects } from "@/components/water";
import { content } from "@/content";
import "./globals.css";

// Google Fonts - Style Script & Luxurious Roman
const googleFontsLink = (
  <>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossOrigin="anonymous" />
    <link
      href="https://fonts.googleapis.com/css2?family=Luxurious+Roman&family=Style+Script&display=swap"
      rel="stylesheet"
    />
  </>
);

const geistSans = Geist({
  variable: "--font-geist-sans",
  subsets: ["latin"],
});

const geistMono = Geist_Mono({
  variable: "--font-geist-mono",
  subsets: ["latin"],
});

export const viewport: Viewport = {
  width: "device-width",
  initialScale: 1,
  maximumScale: 5,
  userScalable: true,
  themeColor: "#0a0a0a",
};

export const metadata: Metadata = {
  title: {
    default: `${content.hero.name} | ${content.hero.role}`,
    template: `%s | ${content.hero.name}`,
  },
  description: content.hero.description,
  keywords: [
    "software engineer",
    "portfolio",
    "SAP consultant",
    "web developer",
    "React",
    "Next.js",
    "TypeScript",
    "Tran Quoc Dat",
  ],
  authors: [{ name: content.hero.name }],
  creator: content.hero.name,
  metadataBase: new URL("https://tranquocdat.com"),
  alternates: {
    canonical: "/",
  },
  openGraph: {
    type: "website",
    locale: "en_US",
    url: "/",
    title: `${content.hero.name} | ${content.hero.role}`,
    description: content.hero.description,
    siteName: content.hero.name,
    images: [
      {
        url: "/og-image.png",
        width: 1200,
        height: 630,
        alt: `${content.hero.name} | ${content.hero.role}`,
      },
    ],
  },
  twitter: {
    card: "summary_large_image",
    title: `${content.hero.name} | ${content.hero.role}`,
    description: content.hero.description,
    creator: "@trandat40",
    images: ["/og-image.png"],
  },
  robots: {
    index: true,
    follow: true,
    googleBot: {
      index: true,
      follow: true,
      "max-video-preview": -1,
      "max-image-preview": "large",
      "max-snippet": -1,
    },
  },
};

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en" className={`${geistSans.variable} ${geistMono.variable}`}>
      <head>{googleFontsLink}</head>
      <body className="bg-midnight text-light-mint antialiased">
        <a href="#main-content" className="skip-link">
          Skip to main content
        </a>
        <WaterEffects />
        {children}
      </body>
    </html>
  );
}
</file>

<file path="src/app/manifest.ts">
import { MetadataRoute } from "next";

export default function manifest(): MetadataRoute.Manifest {
  return {
    name: "Tran Quoc Dat - Portfolio",
    short_name: "TQD Portfolio",
    description: "Software Engineer & SAP Technical Consultant",
    start_url: "/",
    display: "standalone",
    background_color: "#0a0a0a",
    theme_color: "#2c7a7b",
    icons: [
      {
        src: "/icon-192.png",
        sizes: "192x192",
        type: "image/png",
      },
      {
        src: "/icon-512.png",
        sizes: "512x512",
        type: "image/png",
      },
    ],
  };
}
</file>

<file path="src/app/sitemap.ts">
import { MetadataRoute } from "next";

export default function sitemap(): MetadataRoute.Sitemap {
  const baseUrl = "https://tranquocdat.com";

  return [
    {
      url: baseUrl,
      lastModified: new Date(),
      changeFrequency: "monthly",
      priority: 1,
    },
    {
      url: `${baseUrl}/en`,
      lastModified: new Date(),
      changeFrequency: "monthly",
      priority: 1,
    },
    {
      url: `${baseUrl}/vn`,
      lastModified: new Date(),
      changeFrequency: "monthly",
      priority: 0.9,
    },
  ];
}
</file>

<file path="src/components/effects/RainParticles.tsx">
"use client";

import { useRef, useMemo, useEffect, useSyncExternalStore } from "react";
import { useFrame } from "@react-three/fiber";
import * as THREE from "three";
import { rainVertexShader, rainFragmentShader } from "@/shaders/rain";

interface RainParticlesProps {
  /** Rain intensity from 0 (invisible) to 1 (full) */
  intensity?: number;
  /** Whether rain is active */
  active?: boolean;
  /** Number of rain particles (desktop: 3000, mobile: 800) */
  count?: number;
  /** Rain drop color */
  color?: string;
  /** Fall speed multiplier */
  speed?: number;
  /** Horizontal wind drift */
  wind?: number;
}

// Distribution constants
const SPREAD_X = 15; // Horizontal spread
const SPREAD_Z = 8; // Depth spread
const DEPTH_OFFSET = -2;

/**
 * Seeded PRNG for deterministic particle positions
 */
function seededRandom(seed: number): () => number {
  return function () {
    seed = (seed * 9301 + 49297) % 233280;
    return seed / 233280;
  };
}

// External store for pixel ratio (SSR-safe)
function subscribeToPixelRatio(callback: () => void) {
  const mediaQuery = window.matchMedia(
    `(resolution: ${window.devicePixelRatio}dppx)`
  );
  mediaQuery.addEventListener("change", callback);
  return () => mediaQuery.removeEventListener("change", callback);
}

function getPixelRatioSnapshot() {
  return Math.min(window.devicePixelRatio, 2);
}

function getPixelRatioServerSnapshot() {
  return 2;
}

/**
 * GPU-based rain particle system
 * Falls vertically with slight horizontal drift
 * Intensity controls visibility and particle count
 */
export function RainParticles({
  intensity = 1,
  active = true,
  count = 3000,
  color = "#a8d5e5", // Light blue-gray for rain
  speed = 1.5,
  wind = 0.3,
}: RainParticlesProps) {
  const pointsRef = useRef<THREE.Points>(null);
  const materialRef = useRef<THREE.ShaderMaterial | null>(null);

  const pixelRatio = useSyncExternalStore(
    subscribeToPixelRatio,
    getPixelRatioSnapshot,
    getPixelRatioServerSnapshot
  );

  // Generate particle geometry with positions, scales, phases, speeds
  const geometry = useMemo(() => {
    const random = seededRandom(123);
    const geo = new THREE.BufferGeometry();

    const positions = new Float32Array(count * 3);
    const scales = new Float32Array(count);
    const phases = new Float32Array(count);
    const speeds = new Float32Array(count);

    for (let i = 0; i < count; i++) {
      const i3 = i * 3;

      // Distribute across viewport width and depth
      positions[i3] = (random() - 0.5) * SPREAD_X;
      positions[i3 + 1] = random() * 20 - 10; // Initial Y (will be overridden in shader)
      positions[i3 + 2] = (random() - 0.5) * SPREAD_Z + DEPTH_OFFSET;

      // Variable sizes for depth illusion (0.3 - 1.0)
      scales[i] = random() * 0.7 + 0.3;

      // Random phase for staggered start times
      phases[i] = random();

      // Variable fall speeds
      speeds[i] = random();
    }

    geo.setAttribute("position", new THREE.BufferAttribute(positions, 3));
    geo.setAttribute("aScale", new THREE.BufferAttribute(scales, 1));
    geo.setAttribute("aPhase", new THREE.BufferAttribute(phases, 1));
    geo.setAttribute("aSpeed", new THREE.BufferAttribute(speeds, 1));

    return geo;
  }, [count]);

  // Create shader material
  const shaderMaterial = useMemo(() => {
    return new THREE.ShaderMaterial({
      vertexShader: rainVertexShader,
      fragmentShader: rainFragmentShader,
      uniforms: {
        uTime: { value: 0 },
        uPixelRatio: { value: pixelRatio },
        uSize: { value: 40 },
        uIntensity: { value: intensity },
        uSpeed: { value: speed },
        uWind: { value: wind },
        uColor: { value: new THREE.Color(color) },
      },
      transparent: true,
      depthWrite: false,
      blending: THREE.AdditiveBlending,
    });
  }, [pixelRatio, color, speed, wind, intensity]);

  // Store material ref for animation
  useEffect(() => {
    materialRef.current = shaderMaterial;
  }, [shaderMaterial]);

  // Cleanup on unmount
  useEffect(() => {
    const geo = geometry;
    const mat = shaderMaterial;
    return () => {
      geo.dispose();
      mat.dispose();
    };
  }, [geometry, shaderMaterial]);

  // Animate rain
  useFrame((state) => {
    if (!materialRef.current || !active) return;

    materialRef.current.uniforms.uTime.value = state.clock.elapsedTime;
    materialRef.current.uniforms.uIntensity.value = intensity;
  });

  // Don't render if not active or intensity is 0
  if (!active || intensity <= 0) return null;

  return (
    <points ref={pointsRef} geometry={geometry} material={shaderMaterial} />
  );
}
</file>

<file path="src/components/icons/index.tsx">
import { SVGProps } from "react";

export function HomeIcon(props: SVGProps<SVGSVGElement>) {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
      {...props}
    >
      <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
      <polyline points="9 22 9 12 15 12 15 22" />
    </svg>
  );
}

export function UserIcon(props: SVGProps<SVGSVGElement>) {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
      {...props}
    >
      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
      <circle cx="12" cy="7" r="4" />
    </svg>
  );
}

export function FolderIcon(props: SVGProps<SVGSVGElement>) {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
      {...props}
    >
      <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />
    </svg>
  );
}

export function MailIcon(props: SVGProps<SVGSVGElement>) {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
      {...props}
    >
      <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
      <polyline points="22,6 12,13 2,6" />
    </svg>
  );
}
</file>

<file path="src/components/layout/TopToolbar.tsx">
import { content } from "@/content";
import { ReactNode } from "react";

interface ToolbarLinkProps {
  href: string;
  children: ReactNode;
  target?: string;
  rel?: string;
}

function ToolbarLink({ href, children, target, rel }: ToolbarLinkProps) {
  return (
    <a
      href={href}
      target={target}
      rel={rel}
      className="group relative px-4 py-2 overflow-hidden font-luxurious-roman tracking-wide text-lg"
    >
      {/* Background: Appears from top */}
      <span className="absolute inset-0 bg-neon-cyan origin-top scale-y-0 transition-transform duration-300 group-hover:scale-y-100" />

      {/* Text: Contrast color on hover */}
      <span className="relative z-10 text-text-primary transition-colors duration-300 group-hover:text-deep-abyss block">
        {children}
      </span>
    </a>
  );
}

export function TopToolbar() {
  return (
    <header className="fixed top-0 left-0 right-0 z-50 flex justify-between items-center px-4 py-4 pointer-events-none">
      <div className="pointer-events-auto">
        <a
          href={`mailto:${content.contact.email}`}
          className="group relative text-text-primary font-luxurious-roman tracking-wide text-lg"
        >
          {content.contact.email.toLowerCase()}
          <span className="absolute bottom-0 left-0 w-full h-0.5 bg-neon-cyan scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left" />
        </a>
      </div>
      <div className="flex gap-4 pointer-events-auto">
        <ToolbarLink href={content.hero.resumeUrl} target="_blank" rel="noopener noreferrer">
          download cv
        </ToolbarLink>
        <ToolbarLink href="#projects">projects</ToolbarLink>
        <ToolbarLink href={content.social.github} target="_blank" rel="noopener noreferrer">
          github
        </ToolbarLink>
      </div>
    </header>
  );
}
</file>

<file path="src/components/particles/AmbientParticles.tsx">
"use client";

import { useRef, useMemo, useEffect, useSyncExternalStore } from "react";
import { useFrame, useThree } from "@react-three/fiber";
import * as THREE from "three";
import {
  particleVertexShader,
  particleFragmentShader,
} from "@/shaders/particles";

interface AmbientParticlesProps {
  count?: number;
  size?: number;
  color?: string;
}

// Constants for particle distribution
const DISTRIBUTION_SCALE = 20; // Fixed scale for particle spread
const DEPTH_RANGE = 5;
const DEPTH_OFFSET = -2;

/**
 * Simple seeded PRNG for deterministic random values
 * Produces consistent particle positions across renders
 */
function seededRandom(seed: number): () => number {
  return function () {
    seed = (seed * 9301 + 49297) % 233280;
    return seed / 233280;
  };
}

// External store for pixel ratio
function subscribeToPixelRatio(callback: () => void) {
  const mediaQuery = window.matchMedia(
    `(resolution: ${window.devicePixelRatio}dppx)`
  );
  mediaQuery.addEventListener("change", callback);
  return () => mediaQuery.removeEventListener("change", callback);
}

function getPixelRatioSnapshot() {
  return Math.min(window.devicePixelRatio, 2);
}

function getPixelRatioServerSnapshot() {
  return 2; // Default for SSR
}

/**
 * Floating ambient particles with organic drift movement
 * Uses THREE.Points for efficient GPU-based rendering
 */
export function AmbientParticles({
  count = 2000,
  size = 30,
  color = "#9ae6b4", // Mint from palette
}: AmbientParticlesProps) {
  const pointsRef = useRef<THREE.Points>(null);
  const materialRef = useRef<THREE.ShaderMaterial | null>(null);
  useThree(); // Access R3F context

  const pixelRatio = useSyncExternalStore(
    subscribeToPixelRatio,
    getPixelRatioSnapshot,
    getPixelRatioServerSnapshot
  );

  // Generate particle geometry - only depends on count, not viewport
  // Using fixed scale prevents regeneration on window resize
  const geometry = useMemo(() => {
    const random = seededRandom(42); // Fixed seed for deterministic output
    const geo = new THREE.BufferGeometry();

    const positions = new Float32Array(count * 3);
    const scales = new Float32Array(count);
    const phases = new Float32Array(count);

    for (let i = 0; i < count; i++) {
      const i3 = i * 3;

      // Distribute in a large fixed volume (not viewport-dependent)
      positions[i3] = (random() - 0.5) * DISTRIBUTION_SCALE;
      positions[i3 + 1] = (random() - 0.5) * DISTRIBUTION_SCALE;
      positions[i3 + 2] = (random() - 0.5) * DEPTH_RANGE + DEPTH_OFFSET;

      scales[i] = random() * 0.8 + 0.2;
      phases[i] = random() * Math.PI * 2;
    }

    geo.setAttribute("position", new THREE.BufferAttribute(positions, 3));
    geo.setAttribute("aScale", new THREE.BufferAttribute(scales, 1));
    geo.setAttribute("aPhase", new THREE.BufferAttribute(phases, 1));

    return geo;
  }, [count]);

  // Create shader material with current pixel ratio
  const shaderMaterial = useMemo(() => {
    return new THREE.ShaderMaterial({
      vertexShader: particleVertexShader,
      fragmentShader: particleFragmentShader,
      uniforms: {
        uTime: { value: 0 },
        uPixelRatio: { value: pixelRatio },
        uSize: { value: size },
        uColor: { value: new THREE.Color(color) },
      },
      transparent: true,
      depthWrite: false,
      blending: THREE.AdditiveBlending,
    });
  }, [size, color, pixelRatio]);

  // Store material in ref for animation updates
  useEffect(() => {
    materialRef.current = shaderMaterial;
  }, [shaderMaterial]);

  // Dispose geometry and material on unmount to prevent GPU memory leak
  useEffect(() => {
    const geo = geometry;
    const mat = shaderMaterial;
    return () => {
      geo.dispose();
      mat.dispose();
    };
  }, [geometry, shaderMaterial]);

  // Animate particles
  useFrame((state) => {
    if (materialRef.current) {
      materialRef.current.uniforms.uTime.value = state.clock.elapsedTime;
    }
  });

  return (
    <points ref={pointsRef} geometry={geometry} material={shaderMaterial} />
  );
}
</file>

<file path="src/components/particles/index.tsx">
export { AmbientParticles } from "./AmbientParticles";
</file>

<file path="src/components/story/index.ts">
export { HeroStory } from "./HeroStory";
export { RoleCarousel } from "./RoleCarousel";
export { StorySection } from "./StorySection";
</file>

<file path="src/components/story/RoleCarousel.tsx">
"use client";

import { cn } from "@/lib/utils";

interface RoleCarouselProps {
  roles: string[];
  className?: string;
}

/**
 * Horizontal scrolling role titles for hero section
 * Displays roles in a single line with wide gaps for scroll animation
 */
export function RoleCarousel({ roles, className }: RoleCarouselProps) {
  return (
    <div className={cn("flex items-center gap-12 md:gap-24 whitespace-nowrap", className)}>
      {roles.map((role, index) => (
        <span
          key={role}
          className={cn(
            "text-2xl md:text-4xl lg:text-5xl font-light tracking-wide",
            // Alternate colors for visual interest
            index % 2 === 0 ? "text-aqua-bright/90" : "text-teal-accent/80"
          )}
        >
          {role}
        </span>
      ))}
    </div>
  );
}
</file>

<file path="src/components/story/StorySection.tsx">
"use client";

import { useRef, ReactNode } from "react";
import { cn } from "@/lib/utils";
import { useReducedMotion } from "@/hooks/useReducedMotion";

interface StorySectionProps {
  /** Unique ID for navigation anchors */
  id: string;
  /** Section content */
  children: ReactNode;
  /** Additional CSS classes */
  className?: string;
  /** Whether to enable scroll-based animations */
  enableScrollAnimation?: boolean;
  /** ARIA label for the section */
  ariaLabel?: string;
}

/**
 * Base component for story-driven sections with scroll animation support.
 * Provides consistent structure, accessibility, and reduced motion handling.
 *
 * @example
 * ```tsx
 * <StorySection id="hero" ariaLabel="Hero introduction">
 *   <h1>Welcome</h1>
 *   <RoleCarousel roles={roles} />
 * </StorySection>
 * ```
 */
export function StorySection({
  id,
  children,
  className,
  enableScrollAnimation = true,
  ariaLabel,
}: StorySectionProps) {
  const sectionRef = useRef<HTMLElement>(null);
  const prefersReducedMotion = useReducedMotion();

  // Disable animations if user prefers reduced motion
  const shouldAnimate = enableScrollAnimation && !prefersReducedMotion;

  return (
    <section
      ref={sectionRef}
      id={id}
      className={cn("relative min-h-screen w-full", "flex items-center justify-center", className)}
      aria-label={ariaLabel}
      data-story-section
      data-animate={shouldAnimate}
    >
      {children}
    </section>
  );
}
</file>

<file path="src/components/utils/AxeReporter.tsx">
"use client";

import { useEffect } from "react";
import React from "react";
import ReactDOM from "react-dom";

export function AxeReporter() {
  useEffect(() => {
    if (process.env.NODE_ENV === "development" && typeof window !== "undefined") {
      import("@axe-core/react").then((axe) => {
        axe.default(React, ReactDOM, 1000);
      });
    }
  }, []);

  return null;
}
</file>

<file path="src/content/index.ts">
export { content } from "./portfolio";
export type * from "./portfolio";
</file>

<file path="src/hooks/useActiveSection.ts">
"use client";

import { useState, useEffect, useRef } from "react";

interface UseActiveSectionOptions {
  rootMargin?: string;
  threshold?: number | number[];
}

export function useActiveSection(
  sectionIds: string[],
  options: UseActiveSectionOptions = {}
): string | null {
  const [activeSection, setActiveSection] = useState<string | null>(sectionIds[0] || null);
  const observerRef = useRef<IntersectionObserver | null>(null);

  useEffect(() => {
    // Only run on client
    if (typeof window === "undefined") return;

    const observerOptions: IntersectionObserverInit = {
      root: null,
      rootMargin: options.rootMargin ?? "-50% 0px -50% 0px",
      threshold: options.threshold ?? 0,
    };

    const callback: IntersectionObserverCallback = (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          setActiveSection(entry.target.id);
        }
      });
    };

    observerRef.current = new IntersectionObserver(callback, observerOptions);

    sectionIds.forEach((id) => {
      const element = document.getElementById(id);
      if (element) {
        observerRef.current?.observe(element);
      }
    });

    return () => {
      observerRef.current?.disconnect();
    };
  }, [sectionIds, options.rootMargin, options.threshold]);

  return activeSection;
}
</file>

<file path="src/hooks/useFluidSimulation.ts">
"use client";

import { useRef, useEffect, useCallback } from "react";
import * as THREE from "three";
import { useThree, useFrame } from "@react-three/fiber";
import { simulationVertexShader, simulationFragmentShader } from "@/shaders/simulation";

interface UseFluidSimulationOptions {
  resolution?: number;
}

interface UseFluidSimulationReturn {
  getTexture: () => THREE.Texture | null;
  addRipple: (x: number, y: number, strength?: number) => void;
}

interface FBOState {
  rtA: THREE.WebGLRenderTarget;
  rtB: THREE.WebGLRenderTarget;
}

/**
 * GPU-based fluid simulation using Pressure-Velocity Wave Equation
 * Uses Ping-Pong FBO technique with 4-channel output (pressure, vel, dx, dy)
 */
export function useFluidSimulation(
  options: UseFluidSimulationOptions = {}
): UseFluidSimulationReturn {
  const { resolution = 512 } = options;

  const { gl, size } = useThree();

  // Refs for FBOs and materials
  const fboRef = useRef<FBOState | null>(null);
  const simMaterialRef = useRef<THREE.ShaderMaterial | null>(null);
  const simSceneRef = useRef<THREE.Scene | null>(null);
  const simCameraRef = useRef<THREE.OrthographicCamera | null>(null);
  const frameRef = useRef(0);

  // Mouse state
  const mouseRef = useRef({ x: 0, y: 0, active: false, strength: 0 });
  const pendingRipplesRef = useRef<{ x: number; y: number; strength: number }[]>([]);

  // Calculate actual resolution based on viewport
  const width = Math.floor(
    size.width * (typeof window !== "undefined" ? window.devicePixelRatio : 1)
  );
  const height = Math.floor(
    size.height * (typeof window !== "undefined" ? window.devicePixelRatio : 1)
  );

  // Create FBOs and simulation scene
  useEffect(() => {
    const fboOptions: THREE.RenderTargetOptions = {
      format: THREE.RGBAFormat,
      type: THREE.FloatType,
      minFilter: THREE.LinearFilter,
      magFilter: THREE.LinearFilter,
      stencilBuffer: false,
      depthBuffer: false,
    };

    const rtA = new THREE.WebGLRenderTarget(width, height, fboOptions);
    const rtB = new THREE.WebGLRenderTarget(width, height, fboOptions);

    fboRef.current = { rtA, rtB };
    frameRef.current = 0;

    // Simulation material
    const simMaterial = new THREE.ShaderMaterial({
      uniforms: {
        uTexture: { value: null },
        uResolution: { value: new THREE.Vector2(width, height) },
        uMouse: { value: new THREE.Vector2(0, 0) },
        uMouseActive: { value: 0.0 },
        uMouseStrength: { value: 0.5 },
        uFrame: { value: 0 },
      },
      vertexShader: simulationVertexShader,
      fragmentShader: simulationFragmentShader,
    });
    simMaterialRef.current = simMaterial;

    // Simulation scene (fullscreen quad)
    const simScene = new THREE.Scene();
    const simCamera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);
    const simGeometry = new THREE.PlaneGeometry(2, 2);
    const simMesh = new THREE.Mesh(simGeometry, simMaterial);

    simScene.add(simMesh);
    simSceneRef.current = simScene;
    simCameraRef.current = simCamera;

    return () => {
      rtA.dispose();
      rtB.dispose();
      simMaterial.dispose();
      simGeometry.dispose();
    };
  }, [gl, width, height]);

  // Add ripple at normalized position (0-1)
  const addRipple = useCallback((x: number, y: number, strength: number = 0.5) => {
    pendingRipplesRef.current.push({ x, y, strength });
  }, []);

  // Get current texture (called each frame by WaterPlane)
  const getTexture = useCallback(() => {
    return fboRef.current?.rtB.texture ?? null;
  }, []);

  // Simulation update loop
  useFrame(() => {
    if (
      !fboRef.current ||
      !simMaterialRef.current ||
      !simSceneRef.current ||
      !simCameraRef.current
    ) {
      return;
    }

    const { rtA, rtB } = fboRef.current;
    const material = simMaterialRef.current;

    // Process pending ripples
    const ripples = pendingRipplesRef.current;
    if (ripples.length > 0) {
      const ripple = ripples.shift()!;
      // Convert normalized coords to pixel coords
      mouseRef.current = {
        x: ripple.x * width,
        y: ripple.y * height,
        active: true,
        strength: ripple.strength,
      };
    } else {
      mouseRef.current.active = false;
    }

    // Update uniforms
    material.uniforms.uTexture.value = rtA.texture;
    material.uniforms.uMouse.value.set(mouseRef.current.x, mouseRef.current.y);
    material.uniforms.uMouseActive.value = mouseRef.current.active ? 1.0 : 0.0;
    material.uniforms.uMouseStrength.value = mouseRef.current.strength;
    material.uniforms.uFrame.value = frameRef.current;

    // Render simulation to rtB
    gl.setRenderTarget(rtB);
    gl.render(simSceneRef.current, simCameraRef.current);
    gl.setRenderTarget(null);

    // Swap buffers (ping-pong)
    const temp = fboRef.current.rtA;
    fboRef.current.rtA = fboRef.current.rtB;
    fboRef.current.rtB = temp;

    frameRef.current++;
  });

  return {
    getTexture,
    addRipple,
  };
}
</file>

<file path="src/hooks/useGSAP.ts">
"use client";

import { gsap } from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";

// Register GSAP plugins on client side only
if (typeof window !== "undefined") {
  gsap.registerPlugin(ScrollTrigger);
}

export { gsap, ScrollTrigger };
</file>

<file path="src/hooks/useMediaQuery.ts">
"use client";

import { useSyncExternalStore, useCallback } from "react";

/**
 * Hook to detect if a media query matches.
 * Uses useSyncExternalStore for proper SSR hydration.
 */
export function useMediaQuery(query: string): boolean {
  const subscribe = useCallback(
    (callback: () => void) => {
      const media = window.matchMedia(query);
      media.addEventListener("change", callback);
      return () => media.removeEventListener("change", callback);
    },
    [query]
  );

  const getSnapshot = useCallback(() => {
    return window.matchMedia(query).matches;
  }, [query]);

  const getServerSnapshot = useCallback(() => {
    return false; // SSR default
  }, []);

  return useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot);
}

/**
 * Convenience hook for mobile detection (< 768px).
 */
export function useIsMobile(): boolean {
  return useMediaQuery("(max-width: 767px)");
}
</file>

<file path="src/hooks/useMounted.ts">
"use client";

import { useSyncExternalStore } from "react";

/**
 * Hook to detect if the component has mounted on the client.
 * Useful for preventing hydration mismatches with client-only code.
 * Uses useSyncExternalStore for SSR-safe behavior.
 *
 * @returns `true` after the component has mounted, `false` during SSR
 *
 * @example
 * ```tsx
 * const isMounted = useMounted();
 * if (!isMounted) return <Skeleton />;
 * return <ClientOnlyComponent />;
 * ```
 */
const emptySubscribe = () => () => {};
const getClientSnapshot = () => true;
const getServerSnapshot = () => false;

export function useMounted(): boolean {
  return useSyncExternalStore(emptySubscribe, getClientSnapshot, getServerSnapshot);
}
</file>

<file path="src/hooks/useMousePosition.ts">
"use client";

import { useState, useEffect, useCallback } from "react";

interface MousePosition {
  x: number; // 0 to 1 (normalized)
  y: number; // 0 to 1 (normalized)
  isActive: boolean;
}

/**
 * Track normalized mouse position (0-1) with WebGL Y-axis flip
 * Returns isActive: false when cursor leaves window
 */
export function useMousePosition(): MousePosition {
  const [position, setPosition] = useState<MousePosition>({
    x: 0.5,
    y: 0.5,
    isActive: false,
  });

  const handleMouseMove = useCallback((e: MouseEvent) => {
    setPosition({
      x: e.clientX / window.innerWidth,
      y: 1 - e.clientY / window.innerHeight, // Flip Y for WebGL
      isActive: true,
    });
  }, []);

  const handleMouseLeave = useCallback(() => {
    setPosition((prev) => ({ ...prev, isActive: false }));
  }, []);

  useEffect(() => {
    window.addEventListener("mousemove", handleMouseMove);
    document.documentElement.addEventListener("mouseleave", handleMouseLeave);

    return () => {
      window.removeEventListener("mousemove", handleMouseMove);
      document.documentElement.removeEventListener("mouseleave", handleMouseLeave);
    };
  }, [handleMouseMove, handleMouseLeave]);

  return position;
}
</file>

<file path="src/hooks/usePerformanceMonitor.ts">
"use client";

import { useEffect, useRef, useSyncExternalStore } from "react";

interface PerformanceState {
  fps: number;
  shouldReduceEffects: boolean;
}

// SINGLETON: One performance monitor per app
// Module-level state ensures consistent FPS tracking across all components
let performanceState: PerformanceState = {
  fps: 60,
  shouldReduceEffects: false,
};
const listeners = new Set<() => void>();
let monitoringStarted = false;

function subscribeToPerformance(callback: () => void) {
  listeners.add(callback);
  return () => listeners.delete(callback);
}

function getPerformanceSnapshot(): PerformanceState {
  return performanceState;
}

function getPerformanceServerSnapshot(): PerformanceState {
  return { fps: 60, shouldReduceEffects: false };
}

function updatePerformanceState(newState: Partial<PerformanceState>) {
  performanceState = { ...performanceState, ...newState };
  listeners.forEach((listener) => listener());
}

/**
 * Monitor frame rate and suggest effect reduction when needed
 * Uses useSyncExternalStore for React 19 compatible state management
 */
export function usePerformanceMonitor() {
  const state = useSyncExternalStore(
    subscribeToPerformance,
    getPerformanceSnapshot,
    getPerformanceServerSnapshot
  );

  const frameCountRef = useRef(0);
  const lastTimeRef = useRef(0);
  const lowFpsCountRef = useRef(0);

  useEffect(() => {
    // Only start monitoring once
    if (monitoringStarted) return;
    monitoringStarted = true;

    lastTimeRef.current = performance.now();

    let rafId: number;

    const measureFps = () => {
      frameCountRef.current++;
      const currentTime = performance.now();

      if (currentTime - lastTimeRef.current >= 1000) {
        const currentFps = frameCountRef.current;
        frameCountRef.current = 0;
        lastTimeRef.current = currentTime;

        // Track consecutive low FPS periods
        if (currentFps < 30) {
          lowFpsCountRef.current++;
          if (lowFpsCountRef.current >= 3) {
            updatePerformanceState({
              fps: currentFps,
              shouldReduceEffects: true,
            });
          }
        } else {
          lowFpsCountRef.current = Math.max(0, lowFpsCountRef.current - 1);
          updatePerformanceState({
            fps: currentFps,
            shouldReduceEffects: lowFpsCountRef.current >= 3,
          });
        }
      }

      rafId = requestAnimationFrame(measureFps);
    };

    rafId = requestAnimationFrame(measureFps);

    return () => {
      cancelAnimationFrame(rafId);
      monitoringStarted = false;
    };
  }, []);

  return state;
}
</file>

<file path="src/hooks/useReducedMotion.ts">
"use client";

import { useSyncExternalStore } from "react";

/**
 * Hook to detect user's reduced motion preference
 * Returns true if user prefers reduced motion
 */
export function useReducedMotion(): boolean {
  // Use useSyncExternalStore for proper SSR hydration
  return useSyncExternalStore(
    subscribeToReducedMotion,
    getReducedMotionSnapshot,
    getReducedMotionServerSnapshot
  );
}

function getReducedMotionSnapshot(): boolean {
  return window.matchMedia("(prefers-reduced-motion: reduce)").matches;
}

function getReducedMotionServerSnapshot(): boolean {
  // Default to false on server (assume motion is OK)
  return false;
}

function subscribeToReducedMotion(callback: () => void): () => void {
  const mediaQuery = window.matchMedia("(prefers-reduced-motion: reduce)");
  mediaQuery.addEventListener("change", callback);
  return () => mediaQuery.removeEventListener("change", callback);
}
</file>

<file path="src/hooks/useScrollProgress.ts">
"use client";

import { useEffect, useRef, RefObject } from "react";
import { gsap, ScrollTrigger } from "./useGSAP";

interface UseScrollProgressOptions {
  /** Element that triggers the scroll animation */
  triggerRef: RefObject<HTMLElement | null>;
  /** Scroll distance during which section is pinned */
  pinDuration: number;
  /** Whether animation is enabled */
  enabled?: boolean;
  /** Callback for progress updates (0-1) */
  onProgress?: (progress: number) => void;
}

/**
 * Hook for scroll progress tracking with pinning
 * Returns progress value (0-1) that can be used for WebGL animations
 */
export function useScrollProgress(options: UseScrollProgressOptions) {
  const { triggerRef, pinDuration, enabled = true, onProgress } = options;
  const progressRef = useRef(0);

  useEffect(() => {
    if (!enabled || !triggerRef.current) return;

    // Create ScrollTrigger for progress tracking
    const trigger = ScrollTrigger.create({
      trigger: triggerRef.current,
      start: "top top",
      end: `+=${pinDuration}`,
      pin: true,
      scrub: 1,
      anticipatePin: 1,
      onUpdate: (self) => {
        progressRef.current = self.progress;
        onProgress?.(self.progress);
      },
    });

    return () => trigger.kill();
  }, [enabled, pinDuration, triggerRef, onProgress]);

  // Refresh ScrollTrigger on resize
  useEffect(() => {
    if (!enabled) return;

    const handleResize = () => {
      ScrollTrigger.refresh();
    };

    window.addEventListener("resize", handleResize);
    return () => window.removeEventListener("resize", handleResize);
  }, [enabled]);

  return progressRef;
}
</file>

<file path="src/hooks/useScrollStory.ts">
"use client";

import { useLayoutEffect, RefObject } from "react";
import { gsap, ScrollTrigger } from "./useGSAP";

interface UseScrollStoryOptions {
  /** Element that triggers the scroll animation */
  triggerRef: RefObject<HTMLElement | null>;
  /** Element that moves horizontally */
  contentRef: RefObject<HTMLElement | null>;
  /** How far to scroll horizontally (pixels) */
  scrollDistance: number;
  /** Scroll distance during which section is pinned (pixels) */
  pinDuration: number;
  /** Whether animation is enabled */
  enabled?: boolean;
}


/**
 * Hook for scroll-triggered horizontal animation with pinning
 * Uses GSAP ScrollTrigger for smooth scroll-linked animation
 */
export function useScrollStory(options: UseScrollStoryOptions) {
  const { triggerRef, contentRef, scrollDistance, pinDuration, enabled = true } = options;

  useLayoutEffect(() => {
    if (!enabled || !triggerRef.current || !contentRef.current) return;

    // Create GSAP context for cleanup
    const ctx = gsap.context(() => {
      gsap.to(contentRef.current, {
        x: -scrollDistance,
        ease: "none",
        scrollTrigger: {
          trigger: triggerRef.current,
          start: "top top",
          end: `+=${pinDuration}`,
          pin: true,
          scrub: 1,
          anticipatePin: 1,
          // Debug markers (remove in production)
          // markers: true,
        },
      });
    });

    // Cleanup on unmount or when dependencies change
    return () => ctx.revert();
  }, [enabled, scrollDistance, pinDuration, triggerRef, contentRef]);

  // Refresh ScrollTrigger on resize
  useLayoutEffect(() => {
    if (!enabled) return;

    const handleResize = () => {
      ScrollTrigger.refresh();
    };

    window.addEventListener("resize", handleResize);
    return () => window.removeEventListener("resize", handleResize);
  }, [enabled]);
}
</file>

<file path="src/lib/utils.ts">
import { clsx, type ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

/**
 * Utility function to merge Tailwind CSS classes with clsx
 */
export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
</file>

<file path="src/shaders/rain.ts">
/**
 * Rain particle shaders for GPU-based rain effect
 * Creates vertically falling rain drops with slight horizontal drift
 * Designed for use with THREE.Points and BufferGeometry
 */

export const rainVertexShader = /* glsl */ `
uniform float uTime;
uniform float uPixelRatio;
uniform float uSize;
uniform float uIntensity;
uniform float uSpeed;
uniform float uWind;

attribute float aScale;
attribute float aPhase;
attribute float aSpeed;

varying float vAlpha;
varying float vStretch;

void main() {
  vec3 pos = position;

  // Calculate fall progress with individual speed variation
  float fallSpeed = uSpeed * (0.8 + aSpeed * 0.4);
  float fallProgress = mod(uTime * fallSpeed + aPhase, 1.0);

  // Move from top to bottom (Y: 10 to -10 in world space)
  pos.y = 10.0 - fallProgress * 20.0;

  // Add horizontal wind drift
  pos.x += sin(uTime * 0.5 + aPhase * 2.0) * uWind;
  pos.x += uWind * fallProgress * 0.5;

  // Small random horizontal wobble
  pos.x += sin(uTime * 3.0 + aPhase * 10.0) * 0.02;

  vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
  vec4 viewPosition = viewMatrix * modelPosition;
  vec4 projectedPosition = projectionMatrix * viewPosition;

  gl_Position = projectedPosition;

  // Size with depth scaling and intensity control
  float baseSize = uSize * aScale * uPixelRatio;
  float depthScale = 1.0 / -viewPosition.z;
  gl_PointSize = baseSize * depthScale * uIntensity;

  // Alpha based on intensity and position
  // Fade in at top, fade out at bottom
  float fadeIn = smoothstep(0.0, 0.1, fallProgress);
  float fadeOut = smoothstep(1.0, 0.9, fallProgress);
  vAlpha = fadeIn * fadeOut * uIntensity * 0.8;

  // Pass stretch factor for elongated drop shape
  vStretch = fallSpeed * 0.5;
}
`;

export const rainFragmentShader = /* glsl */ `
uniform vec3 uColor;
uniform float uTime;

varying float vAlpha;
varying float vStretch;

void main() {
  // Create elongated rain drop shape (stretched vertically)
  vec2 coord = gl_PointCoord - vec2(0.5);

  // Stretch vertically for rain drop appearance
  coord.y *= 0.4; // Make drops taller than wide

  float dist = length(coord);

  // Discard pixels outside drop shape
  if (dist > 0.5) discard;

  // Soft edge with slight glow
  float alpha = smoothstep(0.5, 0.2, dist) * vAlpha;

  // Brighter core for glass-like appearance
  float core = smoothstep(0.3, 0.0, dist);
  vec3 finalColor = uColor + vec3(core * 0.4);

  gl_FragColor = vec4(finalColor, alpha);
}
`;
</file>

<file path="src/types/content.ts">
export interface EducationItem {
  school: string;
  degree: string;
  year: string;
  gpa: string;
  description?: string;
}

export interface CertificateItem {
  name: string;
  provider: string;
  date?: string;
  link?: string;
}

export interface CertificateGroup {
  name: string;
  count: number;
  items: CertificateItem[];
}

export interface SkillCategory {
  title: string;
  items: string[];
}

export interface ProjectItem {
  title: string;
  description: string;
  techStack: string[];
  image: string;
  link?: string;
  github?: string;
}
</file>

<file path="babel.config.json">
{
  "presets": [
    ["@babel/preset-env", { "targets": { "node": "current" } }],
    ["@babel/preset-react", { "runtime": "automatic" }],
    "@babel/preset-typescript"
  ]
}
</file>

<file path="jest.setup.js">
import '@testing-library/jest-dom';

// Mock next/navigation
jest.mock('next/navigation', () => ({
  usePathname: () => '/',
  useRouter: () => ({
    push: jest.fn(),
    replace: jest.fn(),
    reload: jest.fn(),
    back: jest.fn(),
    prefetch: jest.fn(),
    beforePopState: jest.fn(),
    events: {
      on: jest.fn(),
      off: jest.fn(),
      emit: jest.fn(),
    },
  }),
}));
</file>

<file path="next.config.ts">
import type { NextConfig } from "next";
import withBundleAnalyzer from "@next/bundle-analyzer";

const bundleAnalyzer = withBundleAnalyzer({
  enabled: process.env.ANALYZE === "true",
});

const nextConfig: NextConfig = {
  images: {
    remotePatterns: [{ protocol: "https", hostname: "res.cloudinary.com" }],
    formats: ["image/avif", "image/webp"],
    deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],
    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
  },
  experimental: {
    optimizePackageImports: ["@react-three/fiber", "@react-three/drei"],
  },
  async headers() {
    return [
      {
        source: "/(.*)",
        headers: [
          {
            key: "X-Content-Type-Options",
            value: "nosniff",
          },
          {
            key: "X-Frame-Options",
            value: "DENY",
          },
          {
            key: "X-XSS-Protection",
            value: "1; mode=block",
          },
          {
            key: "Referrer-Policy",
            value: "strict-origin-when-cross-origin",
          },
        ],
      },
    ];
  },
};

export default bundleAnalyzer(nextConfig);
</file>

<file path="src/app/page.tsx">
import { Navbar, TopToolbar } from "@/components/layout";
import { HeroStory } from "@/components/story";
import { About } from "@/components/sections/About/About";
import { Projects } from "@/components/sections/Projects/Projects";
import { Contact } from "@/components/sections/Contact/Contact";

export default function HomePage() {
  return (
    <>
      <TopToolbar />
      <Navbar />
      <main id="main-content" className="scroll-smooth">
        <HeroStory />
        <About />
        <Projects />
        <Contact />
      </main>
    </>
  );
}
</file>

<file path="src/components/effects/index.tsx">
export { EcosystemLayer } from "./EcosystemLayer";
export { Caustics } from "./Caustics";
export { RainParticles } from "./RainParticles";
</file>

<file path="src/components/sections/About/About.test.tsx">
import { render, screen, fireEvent } from "@testing-library/react";
import { About } from "./About";
import "@testing-library/jest-dom";
import { content } from "@/content";

describe("About Section", () => {
  it("renders the About section title and description", () => {
    render(<About />);
    expect(screen.getByText(content.about.title)).toBeInTheDocument();
    expect(screen.getByText(content.about.description)).toBeInTheDocument();
  });

  it("renders initial tab content (Information) correctly", () => {
    render(<About />);
    expect(screen.getByText(content.about.basicInfo.title)).toBeInTheDocument(); // Tab label
    expect(screen.getByText(content.about.basicInfo.locationLabel)).toBeInTheDocument();
    expect(screen.getByText(content.about.basicInfo.location)).toBeInTheDocument();
    expect(screen.getByText(content.about.basicInfo.languagesLabel)).toBeInTheDocument();
    expect(screen.getByText(content.about.basicInfo.languages)).toBeInTheDocument();
    expect(screen.getByText(content.about.basicInfo.statusLabel)).toBeInTheDocument();
    expect(screen.getByText(content.about.basicInfo.status)).toBeInTheDocument();
  });

  it("switches tab content when Skills tab is clicked", () => {
    render(<About />);
    fireEvent.click(screen.getByText(content.about.skills.title));
    expect(screen.getByTestId("skills-grid")).toBeInTheDocument();
    expect(screen.queryByText(content.about.basicInfo.location)).not.toBeInTheDocument();
  });

  it("switches tab content when Education tab is clicked", () => {
    render(<About />);
    fireEvent.click(screen.getByText(content.about.education.title));
    expect(screen.getByText(content.about.education.items[0].school)).toBeInTheDocument();
    expect(screen.getByText(content.about.education.items[0].degree)).toBeInTheDocument();
    expect(screen.queryByText(content.about.basicInfo.location)).not.toBeInTheDocument();
  });

  it("switches tab content when Certificates tab is clicked", () => {
    render(<About />);
    fireEvent.click(screen.getByText(content.about.certificates.title));
    // Check for first certificate item
    expect(screen.getByText(content.about.certificates.items[0].items[0].name)).toBeInTheDocument();
    expect(
      screen.getByText(content.about.certificates.items[0].items[0].provider)
    ).toBeInTheDocument();
    expect(screen.queryByText(content.about.basicInfo.location)).not.toBeInTheDocument();
  });
});
</file>

<file path="src/components/sections/About/SkillsGrid.test.tsx">
import { render, screen } from "@testing-library/react";
import { SkillsGrid } from "./SkillsGrid";
import "@testing-library/jest-dom";
import { content } from "@/content";

describe("SkillsGrid", () => {
  const { categories } = content.about.skills;

  it("renders all skill categories and their items", () => {
    render(<SkillsGrid />);

    // Check Backend Skills
    expect(screen.getByText(categories.backend.title)).toBeInTheDocument();
    categories.backend.items.slice(0, 3).forEach((item) => {
      expect(screen.getByText(item)).toBeInTheDocument();
    });

    // Check Frontend Skills
    expect(screen.getByText(categories.frontend.title)).toBeInTheDocument();
    categories.frontend.items.slice(0, 3).forEach((item) => {
      expect(screen.getByText(item)).toBeInTheDocument();
    });

    // Check Database Skills
    expect(screen.getByText(categories.database.title)).toBeInTheDocument();
    categories.database.items.slice(0, 3).forEach((item) => {
      expect(screen.getByText(item)).toBeInTheDocument();
    });

    // Check Tools
    expect(screen.getByText(categories.tools.title)).toBeInTheDocument();
    categories.tools.items.slice(0, 3).forEach((item) => {
      expect(screen.getByText(item)).toBeInTheDocument();
    });
  });

  it("renders the data-testid attribute", () => {
    render(<SkillsGrid />);
    expect(screen.getByTestId("skills-grid")).toBeInTheDocument();
  });
});
</file>

<file path="src/components/sections/Contact/Contact.test.tsx">
import { render, screen } from "@testing-library/react";
import { Contact } from "./Contact";
import "@testing-library/jest-dom";
import { content } from "@/content";

describe("Contact Section", () => {
  it("renders the Contact section title and description", () => {
    render(<Contact />);
    expect(screen.getByText(content.contact.title)).toBeInTheDocument();
    expect(screen.getByText(content.contact.description)).toBeInTheDocument();
  });

  it("renders contact information (email and phone)", () => {
    render(<Contact />);
    expect(screen.getByText(content.contact.emailLabel)).toBeInTheDocument();
    expect(screen.getByText(content.contact.email)).toBeInTheDocument();
    expect(screen.getByRole("link", { name: content.contact.email })).toHaveAttribute(
      "href",
      `mailto:${content.contact.email}`
    );

    expect(screen.getByText(content.contact.phoneLabel)).toBeInTheDocument();
    expect(screen.getByText(content.contact.phone)).toBeInTheDocument();
    expect(screen.getByRole("link", { name: content.contact.phone })).toHaveAttribute(
      "href",
      `tel:${content.contact.phone}`
    );
  });

  it("renders social links with correct attributes", () => {
    render(<Contact />);
    expect(screen.getByText(content.contact.cta)).toBeInTheDocument();

    const githubLink = screen.getByLabelText("github");
    expect(githubLink).toBeInTheDocument();
    expect(githubLink).toHaveAttribute("href", content.social.github);

    const linkedinLink = screen.getByLabelText("linkedin");
    expect(linkedinLink).toBeInTheDocument();
    expect(linkedinLink).toHaveAttribute("href", content.social.linkedin);

    const gmailLink = screen.getByLabelText("gmail");
    expect(gmailLink).toBeInTheDocument();
    expect(gmailLink).toHaveAttribute("href", content.social.gmail);
  });
});
</file>

<file path="src/components/sections/index.ts">
export { About } from "./About/About";
export { Projects } from "./Projects/Projects";
export { Contact } from "./Contact/Contact";
</file>

<file path="src/components/sections/Projects/Projects.test.tsx">
import { render, screen, fireEvent, waitFor } from "@testing-library/react";
import { Projects } from "./Projects";
import "@testing-library/jest-dom";
import { content } from "@/content";

// Mock the Image component from next/image
jest.mock("next/image", () => ({
  __esModule: true,
  default: (props: Record<string, unknown>) => {
    const { fill, ...rest } = props;
    // eslint-disable-next-line @next/next/no-img-element
    return <img {...rest} alt={rest.alt as string} />;
  },
}));

describe("Projects Section", () => {
  const projects = content.projects.items;
  const firstProject = projects[0];
  const secondProject = projects[1];

  it("renders the Projects section title", () => {
    render(<Projects />);
    expect(screen.getByText(content.projects.title)).toBeInTheDocument();
  });

  it("renders project items", () => {
    render(<Projects />);
    expect(screen.getByText(firstProject.title)).toBeInTheDocument();
    expect(screen.getByText(secondProject.title)).toBeInTheDocument();
    // Check tech stack items (use getAllByText since some tech may appear in multiple projects)
    expect(screen.getAllByText(firstProject.techStack[0]).length).toBeGreaterThan(0);
    expect(screen.getAllByText(secondProject.techStack[0]).length).toBeGreaterThan(0);
  });

  it("opens project modal on click and displays project details", async () => {
    render(<Projects />);

    // Click on first project
    fireEvent.click(screen.getByText(firstProject.title));

    // Wait for the modal to appear and display its content
    await waitFor(() => {
      expect(screen.getByText(firstProject.longDescription)).toBeInTheDocument();
    });
  });

  it("closes project modal when close button is clicked", async () => {
    render(<Projects />);

    expect(screen.queryByText(firstProject.longDescription)).not.toBeInTheDocument();

    // Open the modal
    fireEvent.click(screen.getByText(firstProject.title));

    // Wait for the modal to be open
    await waitFor(() => {
      expect(screen.getByText(firstProject.longDescription)).toBeInTheDocument();
    });

    // Click the close button
    fireEvent.click(screen.getByRole("button", { name: content.projectPopup.close }));

    // Wait for the modal to be closed
    await waitFor(() => {
      expect(screen.queryByText(firstProject.longDescription)).not.toBeInTheDocument();
    });
  });
});
</file>

<file path="src/content/portfolio.ts">
/**
 * Portfolio Content - Centralized TypeScript content for single-language portfolio
 * Replaces next-intl i18n with direct typed content access
 */

// ============================================================================
// TYPE DEFINITIONS
// ============================================================================

export interface NavigationContent {
  home: string;
  about: string;
  projects: string;
  contact: string;
  mainNavigation: string;
}

export interface HeroContent {
  greeting: string;
  name: string;
  role: string;
  description: string;
  cta: string;
  status: string;
  downloadCv: string;
  resumeUrl: string;
}

export interface BasicInfoContent {
  title: string;
  locationLabel: string;
  languagesLabel: string;
  statusLabel: string;
  location: string;
  email: string;
  languages: string;
  status: string;
}

export interface EducationItem {
  school: string;
  degree: string;
  year: string;
  gpa: string;
}

export interface SkillCategory {
  title: string;
  items: string[];
}

export interface SkillCategories {
  backend: SkillCategory;
  frontend: SkillCategory;
  database: SkillCategory;
  tools: SkillCategory;
  others: SkillCategory;
}

export interface CertificateItem {
  name: string;
  provider: string;
  url: string;
}

export interface CertificateGroup {
  name: string;
  issuer: string;
  count: number;
  items: CertificateItem[];
}

export interface AboutContent {
  title: string;
  name: string;
  description: string;
  dob: string;
  role: string;
  basicInfo: BasicInfoContent;
  education: {
    title: string;
    items: EducationItem[];
  };
  skills: {
    title: string;
    categories: SkillCategories;
  };
  certificates: {
    title: string;
    items: CertificateGroup[];
  };
}

export interface GithubLink {
  label: string;
  url: string;
}

export interface ProjectItem {
  title: string;
  description: string;
  longDescription: string;
  techStack: string[];
  fullTechStack: string[];
  role: string;
  type: string;
  duration: string;
  status: string;
  learning: string;
  github: string | GithubLink[];
  url: string;
  image: string;
}

export interface ProjectsContent {
  title: string;
  viewProject: string;
  items: ProjectItem[];
}

export interface ContactContent {
  title: string;
  description: string;
  emailLabel: string;
  phoneLabel: string;
  cta: string;
  email: string;
  phone: string;
  linktree: string;
}

export interface SocialLinks {
  github: string;
  gmail: string;
  linkedin: string;
  facebook: string;
  x: string;
  youtube: string;
  instagram: string;
  zalo: string;
  telegram: string;
  upwork: string;
  reddit: string;
  discord: string;
}

export interface ProjectPopupLabels {
  overview: string;
  role: string;
  learning: string;
  technologies: string;
  type: string;
  status: string;
  duration: string;
  viewSource: string;
  viewLive: string;
  close: string;
}

export interface CommonContent {
  loading: string;
}

export interface PortfolioContent {
  navigation: NavigationContent;
  common: CommonContent;
  hero: HeroContent;
  roles: string[];
  about: AboutContent;
  projects: ProjectsContent;
  contact: ContactContent;
  social: SocialLinks;
  projectPopup: ProjectPopupLabels;
}

// ============================================================================
// CONTENT DATA
// ============================================================================

export const content: PortfolioContent = {
  navigation: {
    home: "Home",
    about: "About",
    projects: "Projects",
    contact: "Contact",
    mainNavigation: "Main navigation",
  },

  common: {
    loading: "Loading Resources...",
  },

  hero: {
    greeting: "Hello, I'm",
    name: "Da'portfolio",
    role: "Software Engineer & SAP Technical Consultant",
    description:
      "Experienced in building and deploying comprehensive Website and Mobile App systems. Additionally, I specialize in developing functionalities within SAP systems.",
    cta: "View My Work",
    status: "Open to work",
    downloadCv: "Download CV",
    resumeUrl:
      "https://drive.usercontent.google.com/download?id=12mH3FvKxVzg0z-rGqczLNd-qy_JAONLe&export=download&authuser=0&confirm=t&uuid=50f107d4-cba4-41f5-8f76-40d464d582ae&at=ALWLOp7MerR3dZxi3D28bLdQbr_K:1764233258988",
  },

  // Roles for horizontal scroll animation
  roles: [
    "Software Engineer",
    "SAP Technical Consultant",
    "Fullstack Developer",
    "Creative Developer",
  ],

  about: {
    title: "About Me",
    name: "Tran Quoc Dat",
    description:
      "I am a final year Software Engineering student with a passion for building scalable applications. My main focus is on SAP Technical Consulting, but I also love working with modern web technologies like Next.js and React.",
    dob: "DoB: 2004-10-04",
    role: "Software Engineer",
    basicInfo: {
      title: "Basic Info",
      locationLabel: "Location",
      languagesLabel: "Languages",
      statusLabel: "Status",
      location: "Ho Chi Minh City, Vietnam",
      email: "dat.tran@example.com",
      languages: "Vietnamese, English",
      status: "Final-Year Student",
    },
    education: {
      title: "Education",
      items: [
        {
          school: "FPT University",
          degree: "Software Engineering",
          year: "2022 - 2026",
          gpa: "GPA: 3.6/4.0",
        },
      ],
    },
    skills: {
      title: "Skills",
      categories: {
        backend: {
          title: "Backend",
          items: [
            "SAP ABAP",
            "SAP RAP",
            "Java",
            "Spring Boot",
            "Python",
            "FastAPI",
            "Flask",
            "MVC",
            "Monolith",
            "Microservices",
          ],
        },
        frontend: {
          title: "Frontend",
          items: [
            "ReactJS",
            "NextJS",
            "TypeScript",
            "JavaScript",
            "Three.js",
            "UI/UX Design",
            "Android (Java)",
          ],
        },
        database: {
          title: "Database",
          items: ["PostgreSQL", "MySQL", "MSSQL", "MongoDB", "Redis", "QDrant", "Supabase"],
        },
        tools: {
          title: "Tools & DevOps",
          items: ["Docker", "Kafka", "CI/CD", "Git", "GitHub", "Cloudflare"],
        },
        others: {
          title: "AI Tools",
          items: [
            "Vibe Coding",
            "Claude Code",
            "GitHub Copilot",
            "Cursor",
            "Antigravity",
            "Gemini CLI",
            "Google AI Studio",
            "n8n",
            "Openrouter",
          ],
        },
      },
    },
    certificates: {
      title: "Certificates",
      items: [
        {
          name: "Coursera",
          issuer: "Coursera",
          count: 9,
          items: [
            {
              name: "Project Management Principles and Practices",
              provider: "University of California, Irvine",
              url: "https://coursera.org/share/e2d023039eb45b4e9a50acf98f951b86",
            },
            {
              name: "User Experience Research and Design",
              provider: "University of Michigan",
              url: "https://coursera.org/share/6b2d9b9df878b385e7882feb8553aa16",
            },
            {
              name: "Software Development Lifecycle",
              provider: "University of Minnesota",
              url: "https://coursera.org/share/0c5ed0fcbc8853284dbcc5535b212887",
            },
            {
              name: "CertNexus Certified Ethical Emerging Technologist",
              provider: "CertNexus",
              url: "https://coursera.org/share/2b5e52f9bf6d0a85af54636bca0dfc86",
            },
            {
              name: "Object Oriented Programming in Java",
              provider: "Duke University, University of California San Diego",
              url: "https://coursera.org/share/20dbf0f78491c8554f59c823e7c786b5",
            },
            {
              name: "Web Design for Everybody: Basics of Web Development & Coding",
              provider: "University of Michigan",
              url: "https://coursera.org/share/670a0cf0ceb2f23d41bbb3bffc382820",
            },
            {
              name: "Java Database Connectivity",
              provider: "LearnQuest",
              url: "https://coursera.org/share/a63ee360e3dff0215d6eedfd5076f79b",
            },
            {
              name: "Computer Communications",
              provider: "University of Colorado System",
              url: "https://coursera.org/share/174d8e8c079ba69a64d80c92da7b246d",
            },
            {
              name: "Academic Skills for University Success",
              provider: "The University of Sydney",
              url: "https://coursera.org/share/6dd89064482d892dd5f55cdab5850aa4",
            },
          ],
        },
        {
          name: "Other Certificates",
          issuer: "Various",
          count: 9,
          items: [
            {
              name: "Certificate on the Job Training",
              provider: "FPT University",
              url: "https://fap.fpt.edu.vn/temp/9eb13e44-ad3b-4a10-a11b-3fa14e6a4b6c.pdf",
            },
            {
              name: "FSOFT Short Course for Testing",
              provider: "FPTU & FSoft",
              url: "",
            },
            {
              name: "Academic Preparatory English TRS601 - English 6",
              provider: "FPT University",
              url: "https://fap.fpt.edu.vn/temp/13980879-6ea8-49a2-bb0d-a90eb33a382f.pdf",
            },
            {
              name: "Excellent Student of Trimester Summer 2025",
              provider: "FPT University",
              url: "https://fap.fpt.edu.vn/Report/Awa.aspx?id=Q0OR9ETnUQo%3d",
            },
            {
              name: "Honorable Student of Trimester Fall 2024",
              provider: "FPT University",
              url: "https://fap.fpt.edu.vn/Report/Awa.aspx?id=SwFA1lQTVp4%3d",
            },
            {
              name: "Honorable Student of Trimester Summer 2024",
              provider: "FPT University",
              url: "https://fap.fpt.edu.vn/Report/Awa.aspx?id=nXcVymoDAeM%3d",
            },
            {
              name: "Excellent Student of Trimester Spring 2024",
              provider: "FPT University",
              url: "https://fap.fpt.edu.vn/Report/Awa.aspx?id=k2VuWB4xnDY%3d",
            },
            {
              name: "Honorable Student of Trimester Fall 2023",
              provider: "FPT University",
              url: "https://fap.fpt.edu.vn/temp/c740e67a-bce7-481d-9b2f-747f7284a7e5.pdf",
            },
            {
              name: "Excellent Student of Trimester Summer 2023",
              provider: "FPT University",
              url: "",
            },
          ],
        },
      ],
    },
  },

  projects: {
    title: "Projects",
    viewProject: "View Project",
    items: [
      {
        title: "Portfolio V1",
        description: "Personal portfolio website version 1.",
        longDescription:
          "The first personal website, focused on displaying basic information. Simple, clean interface, marking the first step into Frontend development.",
        techStack: ["ReactJS", "TailwindCSS"],
        fullTechStack: ["ReactJS", "TailwindCSS", "Github Pages"],
        role: "Frontend Developer: Designed and built the user interface, ensuring a smooth experience across devices.",
        type: "Personal",
        duration: "1 week",
        status: "Completed",
        learning:
          "Learned ReactJS basics, state/props management, and the process of deploying static apps to Github Pages.",
        github: "https://github.com/tqdat410/portfolio-tranquocdat",
        url: "https://tqdat410.github.io/portfolio-tranquocdat",
        image:
          "https://res.cloudinary.com/do6szo7zy/image/upload/f_auto,q_auto/v1764146665/portfolioV1_ujdtyd.png",
      },
      {
        title: "Portfolio V2",
        description: "Personal portfolio website version 2 with backend integration.",
        longDescription:
          "Upgraded version integrating Backend to manage dynamic content. Improved design with more vivid interactive effects.",
        techStack: ["ReactJS", "Spring Boot"],
        fullTechStack: [
          "ReactJS",
          "Spring Boot",
          "MySQL",
          "Cloudinary",
          "Netlify",
          "Render",
          "UptimeRobot",
        ],
        role: "Fullstack Developer: Built both Frontend and Backend, designed the database, and deployed the system.",
        type: "Personal",
        duration: "2 weeks",
        status: "Completed",
        learning:
          "Mastered Spring Boot, RESTful API, Frontend-Backend connection, and deployment process with free services.",
        github: [
          { label: "BE", url: "https://github.com/tqdat410/dattq-be" },
          { label: "FE", url: "https://github.com/tqdat410/dattq-fe" },
        ],
        url: "",
        image:
          "https://res.cloudinary.com/do6szo7zy/image/upload/f_auto,q_auto/v1764146665/portfolioV2_paxkdz.png",
      },
      {
        title: "Portfolio V3",
        description: "Latest personal website with modern interface.",
        longDescription:
          "Latest version with a modern interface, using Next.js and Three.js to create unique 3D experiences and powerful interactive effects.",
        techStack: ["Next.js", "Three.js", "TailwindCSS"],
        fullTechStack: [
          "Next.js",
          "React Three Fiber",
          "TailwindCSS",
          "Framer Motion",
          "TypeScript",
          "Cloudinary",
          "Cloudflare",
        ],
        role: "Frontend & Creative Lead: Focused on design, creative ideas, applying AI and the latest web technologies.",
        type: "Personal",
        duration: "3 days",
        status: "Completed",
        learning:
          "Enhanced UI/UX design thinking, WebGL/Three.js skills, 3D performance optimization, and applying AI to the coding process.",
        github: "https://github.com/tqdat410/portfolio-v3",
        url: "https://tranquocdat.com",
        image:
          "https://res.cloudinary.com/do6szo7zy/image/upload/f_auto,q_auto/v1764146665/portfolioV3_od4bun.png",
      },
      {
        title: "Koi Vet. Center",
        description: "Comprehensive management system for a Koi veterinary center.",
        longDescription:
          "Comprehensive management system for a Koi veterinary center, including appointments, medical records, payments, and personnel management.",
        techStack: ["ReactJS", "Spring Boot", "MySQL"],
        fullTechStack: ["ReactJS", "Spring Boot", "MySQL", "Github Actions", "Cloudinary", "AWS"],
        role: "Team Lead & Backend Lead: Designed system architecture, built APIs, managed progress, and assigned tasks to the team.",
        type: "University",
        duration: "3 months",
        status: "Completed",
        learning:
          "Leadership skills, Monolith system design, database management, API, and teamwork process via Git/Github.",
        github: [
          {
            label: "BE",
            url: "https://github.com/dattqse180062/koi-veterinary-service-center-BE",
          },
          {
            label: "FE",
            url: "https://github.com/dattqse180062/koi-veterinary-service-center-FE",
          },
        ],
        url: "",
        image:
          "https://res.cloudinary.com/do6szo7zy/image/upload/f_auto,q_auto/v1764146664/koi_qacrdx.png",
      },
      {
        title: "Uni. Event Manager",
        description: "Event management platform for university students and staff.",
        longDescription:
          "University event management platform, supporting registration, attendance check, and detailed permissions for students and lecturers.",
        techStack: ["Spring Boot", "Next.js", "PostgreSQL"],
        fullTechStack: [
          "Spring Boot",
          "Next.js",
          "PostgreSQL",
          "Cloudinary",
          "VPS",
          "Docker",
          "CI/CD",
        ],
        role: "Team Lead & Fullstack: Designed system, built APIs, deployed CI/CD, and managed server infrastructure.",
        type: "University",
        duration: "3 months",
        status: "Completed",
        learning: "Mastered PostgreSQL, Docker, CI/CD process, and deploying applications to VPS.",
        github: "https://github.com/dattqse180062/EventManagement-BE",
        url: "",
        image:
          "https://res.cloudinary.com/do6szo7zy/image/upload/f_auto,q_auto/v1764146663/event_pzqhw3.png",
      },
      {
        title: "AI Quick Note",
        description: "Smart note-taking application powered by AI.",
        longDescription:
          "Smart note-taking app on Android integrating AI to categorize, summarize, and quickly retrieve information via Chatbot.",
        techStack: ["Android", "Spring Boot", "AI"],
        fullTechStack: [
          "Android",
          "Java",
          "Spring Boot",
          "PostgreSQL",
          "Redis",
          "OpenRouter",
          "VPS",
          "Docker",
          "CI/CD",
          "Semantic Search",
          "WebSocket",
        ],
        role: "Team Lead & Mobile Dev: Designed architecture, developed key features, integrated AI, and deployed the system.",
        type: "University",
        duration: "2 months",
        status: "Completed",
        learning:
          "Developed Native Android app, integrated AI, Semantic Search, and complex system deployment skills.",
        github: [
          { label: "BE", url: "https://github.com/tqdat410/DaNoteskeeper" },
          { label: "Mobile", url: "https://github.com/tqdat410/DaNoteskeeperAndroid" },
        ],
        url: "",
        image:
          "https://res.cloudinary.com/do6szo7zy/image/upload/f_auto,q_auto/v1764146664/android_jj7kcd.png",
      },
      {
        title: "Hengout (iOS)",
        description: "Location recommendation app tailored for GenZ users.",
        longDescription:
          "Entertainment location recommendation app for GenZ, solving the problem of choosing places for groups with personalized features.",
        techStack: ["React Native", "Spring Boot", "AI"],
        fullTechStack: [
          "React Native",
          "Spring Boot",
          "PostgreSQL",
          "MongoDB",
          "OpenRouter",
          "Kafka",
          "Redis",
          "VPS",
          "Docker",
          "Microservices",
          "Apple IAP",
          "Grafana",
        ],
        role: "Tech Lead: Designed architecture, built Backend, managed server infrastructure, and published the app to AppStore.",
        type: "Startup",
        duration: "6 months",
        status: "Active",
        learning:
          "Real-world startup experience, comprehensive system development from idea to market, financial management, and marketing.",
        github: "",
        url: "https://apps.apple.com/us/app/hengout/id6754825310",
        image:
          "https://res.cloudinary.com/do6szo7zy/image/upload/f_auto,q_auto/v1764146665/ho_app_eu3hr6.png",
      },
      {
        title: "Hengout (Web)",
        description: "Landing page for the Hengout app.",
        longDescription:
          "Landing page introducing Hengout app, providing feature information and online trial experience.",
        techStack: ["Next.js", "Supabase", "AI"],
        fullTechStack: [
          "Next.js",
          "Supabase",
          "TailwindCSS",
          "Framer Motion",
          "TypeScript",
          "Cloudflare",
          "OpenRouter",
        ],
        role: "Frontend Developer: Developed SEO-standard Landing page, optimized performance and user experience.",
        type: "Startup",
        duration: "2 days",
        status: "Completed",
        learning:
          "Advanced SEO techniques, performance optimization with Next.js, and modern UI/UX design.",
        github: "",
        url: "https://hengout.app",
        image:
          "https://res.cloudinary.com/do6szo7zy/image/upload/f_auto,q_auto/v1764146664/ho_web_rm5o1v.png",
      },
      {
        title: "Balance of Interest",
        description: "Simulation game about Economic Benefits.",
        longDescription:
          "Political economy simulation game, illustrating the balance of benefits in society through interactive gameplay.",
        techStack: ["Next.js", "Supabase"],
        fullTechStack: ["Next.js", "TypeScript", "Supabase", "TailwindCSS", "Cloudflare"],
        role: "Game Developer: Comprehensive development from idea, graphics, game logic to user interface.",
        type: "Personal",
        duration: "3 days",
        status: "Completed",
        learning:
          "Game Logic design thinking, content creation, and applying economic knowledge to tech products.",
        github: "",
        url: "https://boi.hengout.app",
        image:
          "https://res.cloudinary.com/do6szo7zy/image/upload/f_auto,q_auto/v1764146662/game2_obnobk.png",
      },
      {
        title: "Social Revolution",
        description: "Simulation game about socio-economic formations.",
        longDescription:
          "Game simulating socio-economic formations and Marxist-Leninist philosophical concepts through interactive experience.",
        techStack: ["Next.js"],
        fullTechStack: ["Next.js", "TailwindCSS", "TypeScript", "Cloudflare", "Vibe Coding"],
        role: "Game Developer: Built script, game logic, and integrated AI tools to support development.",
        type: "Personal",
        duration: "1 week",
        status: "Completed",
        learning:
          "Educational content creation, game logic programming, and applying AI Coding to accelerate development.",
        github: "",
        url: "https://philosophy-game-1.com",
        image:
          "https://res.cloudinary.com/do6szo7zy/image/upload/f_auto,q_auto/v1764146662/game1_atnqip.png",
      },
      {
        title: "Industrial Revolution",
        description: "360-degree museum simulation of industrial revolutions.",
        longDescription:
          "Virtual 360-degree museum recreating industrial revolutions, bringing an intuitive learning experience.",
        techStack: ["HTML", "Three.js"],
        fullTechStack: ["HTML", "Three.js", "Netlify"],
        role: "Creative Developer: Built ideas, designed 3D space, and developed interactive interface.",
        type: "Personal",
        duration: "2 days",
        status: "Completed",
        learning:
          "3D modeling techniques on the web, creating VR/360 experiences, and optimizing graphic resources.",
        github: "https://github.com/tqdat410/360-revolution",
        url: "https://360cmcn.netlify.app",
        image:
          "https://res.cloudinary.com/do6szo7zy/image/upload/f_auto,q_auto/v1764168364/ar_v7tm8y.png",
      },
    ],
  },

  contact: {
    title: "Get In Touch",
    description:
      "I'm always open to discussing new projects, creative ideas or opportunities to be part of your visions. If you have any questions or just want to say hi, I'll try my best to get back to you!",
    emailLabel: "Email",
    phoneLabel: "Phone",
    cta: "Click on the floating keycaps to visit my profiles!",
    email: "tqdat410@gmail.com",
    phone: "+84 901600791",
    linktree: "https://linktr.ee/tqdat410",
  },

  social: {
    github: "https://github.com/tqdat410",
    gmail: "mailto:tqdat410@gmail.com",
    linkedin: "https://www.linkedin.com/in/tqdat410",
    facebook: "https://www.facebook.com/tqdat410",
    x: "https://x.com/trandat40",
    youtube: "https://www.youtube.com/@tqdat410",
    instagram: "https://www.instagram.com/datdatdat_410",
    zalo: "https://zaloapp.com/qr/p/15fb76khotw1z",
    telegram: "https://t.me/tqdat410",
    upwork: "https://www.upwork.com/freelancers/~0166de7b3633a9b092",
    reddit: "https://www.reddit.com/user/Fun_Pudding818",
    discord: "https://discordapp.com/users/395901398509682688",
  },

  projectPopup: {
    overview: "Overview",
    role: "My Role",
    learning: "Key Learnings",
    technologies: "Technologies",
    type: "Type",
    status: "Status",
    duration: "Duration",
    viewSource: "View Source",
    viewLive: "Live",
    close: "Close",
  },
};

// Default export for convenience
export default content;
</file>

<file path="src/shaders/simulation.ts">
// GPU Fluid Simulation Shader - Pressure-Velocity Wave Equation
// 4-channel output: R=pressure, G=velocity, B=dx, A=dy
// Reference: gentlerain.ai / Shadertoy water ripple techniques

export const simulationVertexShader = /* glsl */ `
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`;

export const simulationFragmentShader = /* glsl */ `
uniform sampler2D uTexture;      // Previous frame state (ping-pong)
uniform vec2 uResolution;        // Texture resolution
uniform vec2 uMouse;             // Mouse position (pixel coordinates)
uniform float uMouseActive;      // 1.0 if mouse is active
uniform float uMouseStrength;    // Strength of mouse interaction
uniform int uFrame;              // Frame counter (0 = initialize)

varying vec2 vUv;

const float delta = 1.4;

void main() {
  vec2 uv = vUv;

  // Initialize on first frame
  if (uFrame == 0) {
    gl_FragColor = vec4(0.0);
    return;
  }

  // Sample current state
  vec4 data = texture2D(uTexture, uv);
  float pressure = data.x;
  float pVel = data.y;

  // Texel size for neighbor sampling
  vec2 texelSize = 1.0 / uResolution;

  // Sample neighboring pressures
  float p_right = texture2D(uTexture, uv + vec2(texelSize.x, 0.0)).x;
  float p_left = texture2D(uTexture, uv - vec2(texelSize.x, 0.0)).x;
  float p_up = texture2D(uTexture, uv + vec2(0.0, texelSize.y)).x;
  float p_down = texture2D(uTexture, uv - vec2(0.0, texelSize.y)).x;

  // Boundary conditions (reflect at edges)
  if (uv.x <= texelSize.x) p_left = p_right;
  if (uv.x >= 1.0 - texelSize.x) p_right = p_left;
  if (uv.y <= texelSize.y) p_down = p_up;
  if (uv.y >= 1.0 - texelSize.y) p_up = p_down;

  // Enhanced wave equation (pressure-velocity model)
  pVel += delta * (-2.0 * pressure + p_right + p_left) / 4.0;
  pVel += delta * (-2.0 * pressure + p_up + p_down) / 4.0;

  pressure += delta * pVel;

  // Spring force (prevents drift) - Higher for mercury tension
  pVel -= 0.008 * delta * pressure;

  // Damping (energy loss) - High damping for narrow spread (viscous)
  pVel *= 1.0 - 0.05 * delta;
  pressure *= 0.960;

  // Mouse interaction
  if (uMouseActive > 0.5) {
    vec2 mouseUV = uMouse / uResolution;

    // Correct for aspect ratio to ensure circular ripples
    float aspectRatio = uResolution.x / uResolution.y;
    vec2 aspectCorrection = vec2(aspectRatio, 1.0);

    float dist = distance(uv * aspectCorrection, mouseUV * aspectCorrection);
    float radius = 0.015; // Ripple radius

    if (dist <= radius) {
      float influence = 1.0 - dist / radius;
      pressure += uMouseStrength * influence;
    }
  }

  // Output: R=pressure, G=velocity, B=dx gradient, A=dy gradient
  gl_FragColor = vec4(
    pressure,
    pVel,
    (p_right - p_left) / 2.0,  // dx for UV distortion
    (p_up - p_down) / 2.0      // dy for UV distortion
  );
}
`;
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./src/*"]
    },
    "types": ["jest", "node", "@testing-library/jest-dom"]
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": ["node_modules", "**/*.test.tsx"]
}
</file>

<file path="docs/project-overview-pdr.md">
# DaPortfolio v4.0 - Project Overview & PDR

**Project Name:** DaPortfolio v4.0
**Version:** 0.1.0
**Status:** Active Development
**Last Updated:** 2026-01-29

## Project Overview

DaPortfolio v4.0 is a modern, high-performance personal portfolio website featuring cutting-edge GPU-accelerated visual effects. It serves as both a professional portfolio showcase and technical demonstration of advanced web technologies including real-time 3D graphics, fluid simulation, and particle systems.

### Target Audience

- **Recruiters/Hiring Managers**: Quickly scan projects, skills, and contact information
- **Tech Enthusiasts**: Appreciate advanced WebGL implementation and shader programming
- **Developers**: Reference for Next.js + Three.js + GSAP integration patterns
- **Accessibility Users**: Full keyboard navigation and screen reader support

## Goals & Objectives

### Primary Goals
1. **Professional Showcase** - Present portfolio projects and technical skills effectively
2. **Technical Demonstration** - Showcase advanced GPU-accelerated graphics capabilities
3. **Performance Excellence** - Maintain 60 FPS animations across device tiers
4. **Accessibility Compliance** - Meet WCAG 2.1 AA standards for inclusive access

### Business Objectives
- Increase recruiter engagement through memorable visual experience
- Demonstrate full-stack web development capabilities
- Build personal brand as technical architect
- Generate inbound opportunities from impressed visitors

## Key Features & Requirements

### Functional Requirements

| Feature | Description | Priority |
|---------|-------------|----------|
| Hero Section | Animated introduction with name, role, status | Critical |
| About Section | Biography, education, skills, certificates | Critical |
| Projects | Portfolio grid with project metadata | Critical |
| Contact | Contact form, email, social links | Critical |
| Water Effects | GPU-based fluid simulation with ripples | High |
| Particle Systems | Ambient floating + rain particles | High |
| Caustics | Underwater light pattern shader | Medium |
| Animations | GSAP scroll-triggered section transitions | High |
| Responsive Design | Mobile, tablet, desktop layouts | Critical |
| Accessibility | WCAG 2.1 AA, keyboard nav, screen readers | Critical |

### Non-Functional Requirements

| Requirement | Target | Rationale |
|-------------|--------|-----------|
| **Performance** | 60 FPS on mobile | Smooth visual experience |
| **Load Time** | < 3s first paint | User retention |
| **Accessibility** | WCAG 2.1 AA | Inclusive design |
| **Browser Support** | Chrome 120+, Safari 16+, Firefox 122+ | Modern stack |
| **TypeScript** | Strict mode | Type safety |
| **Test Coverage** | 70%+ | Code reliability |
| **Bundle Size** | < 500KB gzipped | Fast downloads |

## Success Metrics

### Technical Metrics
- **60 FPS** on devices with RTX 3060+, 45-50 FPS on mid-range
- **First Contentful Paint** < 1.5s
- **Largest Contentful Paint** < 3s
- **Zero accessibility violations** (axe-core audit)
- **Keyboard navigation** works for all interactive elements

### Business Metrics
- **Recruiter reach**: Monitor via analytics
- **Social shares**: Track portfolio project links
- **Contact form submissions**: Inbound opportunities
- **Page stay time**: Average 2+ minutes per session

## Technical Architecture

### Tech Stack Rationale

**Next.js 16 + React 19**
- App Router for modern routing patterns
- Server components for optimization
- Built-in image/font optimization

**Three.js + React Three Fiber**
- GPU acceleration for visual effects
- Reusable R3F components via Drei
- Performance monitoring and LOD systems

**GSAP ScrollTrigger**
- Choreographed scroll animations
- Reduced motion support built-in
- Smooth timeline management

**Tailwind CSS v4**
- Semantic color system integration
- Responsive utilities
- Custom theme extension

**TypeScript Strict Mode**
- Full type safety across codebase
- Better IDE intellisense
- Reduced runtime errors

## Content Structure

### Portfolio Data (portfolio.ts)
Single-source TypeScript file containing:
- Navigation labels
- Hero content (greeting, role, status, CV URL)
- About section (bio, location, education, skills, certificates)
- Projects (10 portfolio items with metadata)
- Contact information (email, phone, 11 social platforms)

### Design System (Silver Mist)

**Color Palette**
```
Background:  #f1f5f9 (Slate 100)
Primary:     #0f172a (Slate 900)
Body:        #1e293b (Slate 800)
Secondary:   #64748b (Slate 500)
Surface:     rgba(241, 245, 249, 0.7)
Highlight:   #ffffff
```

**Typography**
- Headings: Luxurious Roman (serif, 400 weight)
- Display: Style Script (cursive)
- Mono: Geist Mono (for code)

## Component Hierarchy

```
Layout Root
├── Navbar (Desktop vertical, Mobile horizontal)
├── Main Content
│   ├── Hero + Story Carousel
│   ├── About Section
│   │   ├── Bio
│   │   ├── Skills Grid
│   │   └── Certificates
│   ├── Projects Section
│   │   └── Project Cards
│   └── Contact Section
└── Performance Monitor (dev only)
```

## Data Flow

```
Content Source: portfolio.ts (TypeScript)
  ↓
Components consume via imports
  ↓
GSAP monitors scroll position
  ↓
Animations trigger on intersection
  ↓
WebGL renders effects
```

## Constraints & Dependencies

### Technical Constraints
- WebGL 2.0 required for texture formats
- GPU VRAM: 256MB minimum for shader textures
- JavaScript ES2020 target minimum

### External Dependencies
- **Google Fonts**: Luxurious Roman, Style Script (CDN)
- **axe-core**: Accessibility testing
- **GitHub**: Social link integration

### Browser Limitations
- Older browsers (IE11): Graceful fallback to static layout
- Low-end devices: Automatic effect reduction via `usePerformanceMonitor`

## Phases & Milestones

### Phase 1: Foundation (Complete)
- Next.js setup with App Router
- Tailwind CSS v4 integration
- TypeScript configuration

### Phase 2: Core Components (In Progress)
- Layout system (Navbar, Sections)
- Content structure (portfolio.ts)
- Responsive grid layouts

### Phase 3: Visual Effects (In Progress)
- Water simulation shader
- Rain particle system
- Ambient particles
- Caustics effect

### Phase 4: Animations (In Progress)
- GSAP scroll integration
- Section transitions
- Micro-interactions

### Phase 5: Accessibility (In Progress)
- WCAG 2.1 AA compliance
- Keyboard navigation
- Screen reader support

### Phase 6: Optimization (Planned)
- Bundle analysis
- Image optimization
- Shader compilation caching
- Performance monitoring

### Phase 7: Deployment (Planned)
- Vercel hosting setup
- Analytics integration
- CI/CD pipeline

## Risk Assessment

| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|-----------|
| GPU effects unsupported on old browsers | High | Medium | Graceful degradation, feature detection |
| Performance issues on mobile | High | Medium | Performance monitor, effect reduction |
| Accessibility compliance gaps | Medium | Low | axe-core testing, manual review |
| Shader compilation failures | Medium | Low | Error boundaries, fallback shaders |
| Content becomes outdated | Low | Medium | Easy updates via portfolio.ts |

## Future Enhancements

- Dark mode toggle with theme persistence
- Multi-language support (i18n)
- Blog/articles section
- Case studies for featured projects
- Live chat widget integration
- Newsletter signup
- Performance metrics dashboard
- A/B testing framework

## Success Definition

The project succeeds when:
1. All pages load in < 3 seconds
2. 60 FPS maintained on RTX 3060+ devices
3. WCAG 2.1 AA compliance verified via axe-core
4. All interactive elements keyboard-accessible
5. Visual effects work on 90%+ of target browsers
6. Positive recruiter feedback on visual design
7. Contact form receives quality inbound leads
</file>

<file path="src/components/effects/Caustics.tsx">
"use client";

import { useRef, useMemo } from "react";
import { useFrame, useThree } from "@react-three/fiber";
import * as THREE from "three";

const causticsVertexShader = /* glsl */ `
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`;

const causticsFragmentShader = /* glsl */ `
uniform float uTime;
uniform vec3 uColor;
uniform vec3 uColor2;

varying vec2 vUv;

// Enhanced procedural caustics pattern
float caustic(vec2 uv, float time) {
  vec2 p = uv * 10.0;
  float c = 0.0;

  for(float i = 1.0; i < 5.0; i++) {
    float t = time * (0.25 / i);
    vec2 offset = vec2(sin(t + i * 0.5), cos(t * 0.7 + i * 0.3)) * i;
    c += 1.0 / length(fract(p + offset) - 0.5);
  }

  return c / 4.0;
}

// Secondary caustic layer for depth
float caustic2(vec2 uv, float time) {
  vec2 p = uv * 6.0 + vec2(2.0, 1.5);
  float c = 0.0;

  for(float i = 1.0; i < 4.0; i++) {
    float t = time * (0.2 / i) + 1.5;
    vec2 offset = vec2(cos(t), sin(t * 1.3)) * i * 0.8;
    c += 1.0 / length(fract(p + offset) - 0.5);
  }

  return c / 3.0;
}

void main() {
  float c1 = caustic(vUv, uTime);
  float c2 = caustic2(vUv, uTime * 0.8);

  c1 = smoothstep(0.7, 2.2, c1);
  c2 = smoothstep(0.8, 2.0, c2);

  // Combine layers with different colors
  vec3 color = uColor * c1 + uColor2 * c2 * 0.5;

  // Softer caustics for terrarium dappled light effect
  float alpha = (c1 + c2 * 0.5) * 0.12;

  gl_FragColor = vec4(color, alpha);
}
`;

/**
 * Dappled light pattern through terrarium glass
 * Creates soft light effect like sunlight filtering through leaves
 * Updated with warm golden/sage color scheme
 */
export function Caustics() {
  const materialRef = useRef<THREE.ShaderMaterial>(null);
  const { viewport } = useThree();

  const shaderMaterial = useMemo(() => {
    return new THREE.ShaderMaterial({
      vertexShader: causticsVertexShader,
      fragmentShader: causticsFragmentShader,
      uniforms: {
        uTime: { value: 0 },
        // Golden Sun - primary dappled light
        uColor: { value: new THREE.Color("#E1BF7D") },
        // Warm Cream - secondary layer
        uColor2: { value: new THREE.Color("#F4EEE0") },
      },
      transparent: true,
      depthWrite: false,
      blending: THREE.AdditiveBlending,
    });
  }, []);

  useFrame((state) => {
    if (materialRef.current) {
      materialRef.current.uniforms.uTime.value = state.clock.elapsedTime;
    }
  });

  return (
    <mesh position={[0, 0, -3]}>
      <planeGeometry args={[viewport.width, viewport.height, 1, 1]} />
      <primitive object={shaderMaterial} ref={materialRef} attach="material" />
    </mesh>
  );
}
</file>

<file path="src/components/effects/EcosystemLayer.tsx">
"use client";

import { Suspense } from "react";
import { AmbientParticles } from "@/components/particles";
import { BackgroundWaves } from "@/components/water/BackgroundWaves";
import { Caustics } from "./Caustics";

// Terrarium natural color palette
const MOSS_GREEN = "#566B4D"; // Primary - lush moss
const SAGE_LEAF = "#889977"; // Secondary - soft sage
const GOLDEN_SUN = "#E1BF7D"; // Tertiary - warm sunlight
const LICHEN = "#A3B18A"; // Accent - natural lichen

interface EcosystemLayerProps {
  isMobile?: boolean;
  reducedEffects?: boolean;
}

/**
 * Combined ecosystem effects layer
 * Manages particles, waves, and caustics with performance scaling
 * Updated with terrarium natural color scheme
 */
export function EcosystemLayer({
  isMobile = false,
  reducedEffects = false,
}: EcosystemLayerProps) {
  // Reduce effects based on device and performance
  const particleCount = reducedEffects ? 300 : isMobile ? 500 : 2000;
  const particleSize = isMobile ? 20 : 30;

  // Skip all effects if performance is too low
  if (reducedEffects && isMobile) {
    return null;
  }

  return (
    <Suspense fallback={null}>
      {/* Background wave layer - deepest */}
      <BackgroundWaves />

      {/* Caustics light pattern */}
      {!isMobile && <Caustics />}

      {/* Primary particle layer - Moss Green (like floating spores) */}
      <AmbientParticles
        count={particleCount}
        size={particleSize}
        color={MOSS_GREEN}
      />

      {/* Secondary particle layer for depth (desktop only) - Sage Leaf */}
      {!isMobile && !reducedEffects && (
        <AmbientParticles count={500} size={15} color={SAGE_LEAF} />
      )}

      {/* Tertiary layer - Golden Sun dust motes (desktop only) */}
      {!isMobile && !reducedEffects && (
        <AmbientParticles count={200} size={10} color={GOLDEN_SUN} />
      )}
    </Suspense>
  );
}
</file>

<file path="src/components/layout/index.ts">
export { Navbar } from "./Navbar";
export { Section } from "./Section";
export { TopToolbar } from "./TopToolbar";
</file>

<file path="src/components/layout/Navbar.tsx">
"use client";

import { useActiveSection } from "@/hooks/useActiveSection";

const NAV_ITEMS = [
  { id: "home", label: "TrầnQuốcĐạt", font: "font-luxurious-roman", href: "#home" },
  { id: "about", label: "About Me", font: "font-luxurious-roman", href: "#about" },
  { id: "projects", label: "Projects", font: "font-luxurious-roman", href: "#projects" },
  { id: "contact", label: "Keep in Touch", font: "font-luxurious-roman", href: "#contact" },
] as const;

const SECTION_IDS = NAV_ITEMS.map((item) => item.id);

export function Navbar() {
  const activeSection = useActiveSection(SECTION_IDS);

  const handleClick = (e: React.MouseEvent<HTMLAnchorElement>, href: string) => {
    e.preventDefault();
    const element = document.querySelector(href);
    if (element) {
      element.scrollIntoView({ behavior: "smooth" });
    }
  };

  return (
    <nav
      className="fixed bottom-8 left-8 z-50 flex flex-col items-start -space-y-5 pb-[env(safe-area-inset-bottom)]"
      role="navigation"
      aria-label="Main Navigation"
    >
      {NAV_ITEMS.map((item) => {
        const isActive = activeSection === item.id;

        return (
          <a
            key={item.id}
            href={item.href}
            onClick={(e) => handleClick(e, item.href)}
            className={`
              block transition-all duration-500 ease-out origin-left
              ${item.font} tracking-wide
              ${
                isActive
                  ? "text-lg opacity-100 text-text-primary drop-shadow-[0_0_10px_rgba(203,213,225,0.8)] font-bold"
                  : "text-md opacity-60 text-text-secondary blur-[0.3px] hover:opacity-90 hover:scale-105 hover:text-text-primary"
              }
            `}
            aria-current={isActive ? "page" : undefined}
          >
            {item.label}
          </a>
        );
      })}
    </nav>
  );
}
</file>

<file path="src/components/layout/Section.tsx">
import { ReactNode } from "react";

interface SectionProps extends React.HTMLAttributes<HTMLElement> {
  id: string;
  children: ReactNode;
  className?: string;
}

/**
 * Full-viewport section wrapper.
 * Provides consistent padding for navbar offset.
 * Desktop: left padding for vertical navbar (w-16 = 64px)
 * Mobile: bottom padding for horizontal navbar (h-14 = 56px)
 */
export function Section({ id, children, className = "", ...props }: SectionProps) {
  return (
    <section
      id={id}
      className={`
        min-h-screen w-full
        flex items-center justify-center
        p-4
        ${className}
      `}
      {...props}
    >
      {children}
    </section>
  );
}
</file>

<file path="src/components/sections/About/About.tsx">
"use client";

import { useState } from "react";
import { content } from "@/content";
import { Section } from "@/components/layout/Section";
import { SkillsGrid } from "./SkillsGrid";

type Tab = "info" | "skills" | "education" | "certificates";

export function About() {
  const about = content.about;
  const [activeTab, setActiveTab] = useState<Tab>("info");

  const tabs: { id: Tab; label: string }[] = [
    { id: "info", label: about.basicInfo.title },
    { id: "skills", label: about.skills.title },
    { id: "education", label: about.education.title },
    { id: "certificates", label: about.certificates.title },
  ];

  return (
    <Section id="about">
      <div className="w-full max-w-5xl mx-auto">
        {/* Title */}
        <h2 className="text-4xl md:text-5xl font-bold text-text-primary text-center mb-4">
          {about.title}
        </h2>
        <p className="text-center text-text-secondary max-w-2xl mx-auto mb-8">{about.description}</p>

        {/* Tab Navigation */}
        <div className="flex flex-wrap justify-center gap-2 mb-8">
          {tabs.map((tab) => (
            <button
              key={tab.id}
              onClick={() => setActiveTab(tab.id)}
              className={`
                px-6 py-2 rounded-lg font-medium transition-all
                ${
                  activeTab === tab.id
                    ? "bg-neon-cyan text-white shadow-lg shadow-text-primary/20"
                    : "bg-white text-text-secondary hover:bg-bg-secondary border border-steel-dark"
                }
              `}
            >
              {tab.label}
            </button>
          ))}
        </div>

        {/* Tab Content */}
        <div className="min-h-[400px]">
          {activeTab === "info" && (
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              <InfoCard label={about.basicInfo.locationLabel} value={about.basicInfo.location} />
              <InfoCard label={about.basicInfo.languagesLabel} value={about.basicInfo.languages} />
              <InfoCard label={about.basicInfo.statusLabel} value={about.basicInfo.status} />
            </div>
          )}

          {activeTab === "skills" && <SkillsGrid />}

          {activeTab === "education" && (
            <div className="max-w-xl mx-auto">
              {about.education.items.map((edu, i) => (
                <div key={i} className="p-6 rounded-xl bg-white border border-steel-dark shadow-sm hover:shadow-md transition-shadow">
                  <h4 className="text-xl font-semibold text-text-primary">{edu.school}</h4>
                  <p className="text-text-secondary">{edu.degree}</p>
                  <p className="text-accent-shadow">{edu.year}</p>
                  <p className="text-text-body">{edu.gpa}</p>
                </div>
              ))}
            </div>
          )}

          {activeTab === "certificates" && (
            <div className="space-y-4">
              {about.certificates.items.map((group, i) => (
                <details key={i} className="group">
                  <summary
                    className="
                    flex justify-between items-center cursor-pointer
                    p-4 rounded-lg bg-white border border-steel-dark
                    hover:border-text-primary/40 hover:shadow-sm transition-all
                  "
                  >
                    <span className="text-text-primary font-medium">{group.name}</span>
                    <span className="text-accent-shadow">{group.count} certificates</span>
                  </summary>
                  <div className="mt-2 pl-4 space-y-2">
                    {group.items.map((cert, j) => (
                      <div
                        key={j}
                        className="p-3 rounded-lg bg-bg-secondary/30 border border-steel-dark"
                      >
                        <p className="text-text-secondary text-sm">{cert.name}</p>
                        <p className="text-accent-shadow text-xs">{cert.provider}</p>
                      </div>
                    ))}
                  </div>
                </details>
              ))}
            </div>
          )}
        </div>
      </div>
    </Section>
  );
}

function InfoCard({ label, value }: { label: string; value: string }) {
  return (
    <div className="p-6 rounded-xl bg-white border border-steel-dark shadow-sm hover:shadow-md transition-shadow text-center">
      <p className="text-sm text-accent-shadow mb-1">{label}</p>
      <p className="text-lg text-text-primary">{value}</p>
    </div>
  );
}
</file>

<file path="src/components/sections/About/SkillsGrid.tsx">
"use client";

import { content } from "@/content";

export function SkillsGrid() {
  const categories = content.about.skills.categories;

  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" data-testid="skills-grid">
      {Object.entries(categories).map(([key, category]) => (
        <div
          key={key}
          className="
            p-6 rounded-xl
            bg-white border border-steel-dark
            hover:border-text-primary/40 hover:shadow-md transition-all
          "
        >
          <h4 className="text-lg font-semibold text-text-primary mb-4">{category.title}</h4>
          <div className="flex flex-wrap gap-2">
            {category.items.map((skill: string) => (
              <span
                key={skill}
                className="
                  px-3 py-1 text-sm rounded-full
                  bg-bg-secondary text-text-secondary
                  border border-steel-dark
                "
              >
                {skill}
              </span>
            ))}
          </div>
        </div>
      ))}
    </div>
  );
}
</file>

<file path="src/components/sections/Contact/Contact.tsx">
"use client";

import { content } from "@/content";
import { Section } from "@/components/layout/Section";

const SOCIAL_ICONS: Record<string, string> = {
  github:
    "M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.115 2.504.337 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z",
  linkedin:
    "M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z",
};

export function Contact() {
  const contactInfo = content.contact;
  const social = content.social;

  const socialLinks = [
    { key: "github", url: social.github },
    { key: "linkedin", url: social.linkedin },
    { key: "gmail", url: social.gmail },
    { key: "facebook", url: social.facebook },
    { key: "telegram", url: social.telegram },
    { key: "discord", url: social.discord },
  ];

  return (
    <Section id="contact">
      <div className="w-full max-w-3xl mx-auto text-center">
        <h2 className="text-4xl md:text-5xl font-bold text-text-primary mb-6">{contactInfo.title}</h2>
        <p className="text-lg text-text-secondary mb-12 max-w-xl mx-auto">{contactInfo.description}</p>

        {/* Contact Info */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
          <div className="p-6 rounded-xl bg-white border border-steel-dark shadow-sm hover:shadow-md transition-shadow">
            <p className="text-sm text-accent-shadow mb-1">{contactInfo.emailLabel}</p>
            <a
              href={`mailto:${contactInfo.email}`}
              className="text-text-primary hover:text-text-secondary transition-colors font-medium"
            >
              {contactInfo.email}
            </a>
          </div>
          <div className="p-6 rounded-xl bg-white border border-steel-dark shadow-sm hover:shadow-md transition-shadow">
            <p className="text-sm text-accent-shadow mb-1">{contactInfo.phoneLabel}</p>
            <a
              href={`tel:${contactInfo.phone}`}
              className="text-text-primary hover:text-text-secondary transition-colors font-medium"
            >
              {contactInfo.phone}
            </a>
          </div>
        </div>

        {/* Social Links */}
        <p className="text-sm text-accent-shadow mb-6">{contactInfo.cta}</p>
        <div className="flex flex-wrap justify-center gap-4">
          {socialLinks.map(({ key, url }) => (
            <a
              key={key}
              href={url}
              target="_blank"
              rel="noopener noreferrer"
              className="
                w-12 h-12 rounded-lg
                flex items-center justify-center
                bg-white border border-steel-dark
                text-text-secondary hover:text-text-primary
                hover:border-text-primary/50 hover:bg-bg-secondary/50 hover:shadow-md
                transition-all
              "
              aria-label={key}
            >
              {SOCIAL_ICONS[key] ? (
                <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path d={SOCIAL_ICONS[key]} />
                </svg>
              ) : (
                <span className="text-xs uppercase">{key.slice(0, 2)}</span>
              )}
            </a>
          ))}
        </div>
      </div>
    </Section>
  );
}
</file>

<file path="src/components/sections/Projects/ProjectCard.tsx">
"use client";

import Image from "next/image";

interface ProjectCardProps {
  title: string;
  description: string;
  techStack: string[];
  image: string;
  onClick: () => void;
}

export function ProjectCard({ title, description, techStack, image, onClick }: ProjectCardProps) {
  return (
    <button
      onClick={onClick}
      className="
        group relative overflow-hidden rounded-xl
        bg-white border border-steel-dark
        hover:border-text-primary/50 hover:shadow-lg transition-all duration-300
        text-left w-full
      "
      aria-label={`View project details for ${title}`}
    >
      {/* Image */}
      <div className="relative h-48 overflow-hidden">
        <Image
          src={image}
          alt={title}
          fill
          sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
          className="object-cover transition-transform duration-500 group-hover:scale-110"
        />
        <div className="absolute inset-0 bg-gradient-to-t from-white via-transparent to-transparent" />
      </div>

      {/* Content */}
      <div className="p-5">
        <h3 className="text-lg font-semibold text-text-primary mb-2 group-hover:text-text-secondary transition-colors">
          {title}
        </h3>
        <p className="text-sm text-accent-shadow line-clamp-2 mb-4">
          {description}
        </p>

        {/* Tech Stack */}
        <div className="flex flex-wrap gap-2">
          {techStack.slice(0, 3).map((tech) => (
            <span
              key={tech}
              className="px-2 py-0.5 text-xs rounded bg-bg-secondary text-text-secondary"
            >
              {tech}
            </span>
          ))}
          {techStack.length > 3 && (
            <span className="px-2 py-0.5 text-xs text-accent-shadow">
              +{techStack.length - 3}
            </span>
          )}
        </div>
      </div>

      {/* Hover Overlay */}
      <div className="
        absolute inset-0 bg-accent-glow/20
        opacity-0 group-hover:opacity-100 transition-opacity
        pointer-events-none
      " />
    </button>
  );
}
</file>

<file path="src/components/sections/Projects/ProjectModal.tsx">
"use client";

import { useEffect, useRef } from "react";
import Image from "next/image";
import { content, type ProjectItem } from "@/content";

interface ProjectModalProps {
  project: ProjectItem | null;
  onClose: () => void;
}

export function ProjectModal({ project, onClose }: ProjectModalProps) {
  const labels = content.projectPopup;
  const modalRef = useRef<HTMLDivElement>(null);
  const closeButtonRef = useRef<HTMLButtonElement>(null);

  // Close on escape key and Focus Trap
  useEffect(() => {
    if (!project) return;

    // Focus close button when modal opens
    const timer = setTimeout(() => {
      closeButtonRef.current?.focus();
    }, 50);

    const handleKeyDown = (e: KeyboardEvent) => {
      if (e.key === "Escape") {
        onClose();
        return;
      }

      if (e.key === "Tab") {
        const modal = modalRef.current;
        if (!modal) return;

        const focusableElements = modal.querySelectorAll<HTMLElement>(
          'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );

        if (focusableElements.length === 0) return;

        const firstElement = focusableElements[0];
        const lastElement = focusableElements[focusableElements.length - 1];

        if (e.shiftKey && document.activeElement === firstElement) {
          e.preventDefault();
          lastElement.focus();
        } else if (!e.shiftKey && document.activeElement === lastElement) {
          e.preventDefault();
          firstElement.focus();
        }
      }
    };

    document.addEventListener("keydown", handleKeyDown);
    return () => {
      document.removeEventListener("keydown", handleKeyDown);
      clearTimeout(timer);
    };
  }, [project, onClose]);

  // Prevent scroll when modal open
  useEffect(() => {
    if (project) {
      document.body.style.overflow = "hidden";
    }
    return () => {
      document.body.style.overflow = "";
    };
  }, [project]);

  if (!project) return null;

  return (
    <div
      className="fixed inset-0 z-[100] flex items-center justify-center p-4"
      onClick={onClose}
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-title"
    >
      {/* Backdrop */}
      <div className="absolute inset-0 bg-white/90 backdrop-blur-sm" />

      {/* Modal */}
      <div
        ref={modalRef}
        className="
          relative w-full max-w-3xl max-h-[90vh] overflow-y-auto
          bg-white border border-steel-dark rounded-2xl
          shadow-2xl shadow-text-primary/20
        "
        onClick={(e) => e.stopPropagation()}
      >
        {/* Close Button */}
        <button
          ref={closeButtonRef}
          onClick={onClose}
          className="absolute top-4 right-4 z-10 p-2 rounded-full bg-white/80 text-text-primary hover:text-text-secondary focus:outline-none focus:ring-2 focus:ring-neon-cyan"
          aria-label={labels.close}
        >
          <svg className="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth={2}
              d="M6 18L18 6M6 6l12 12"
            />
          </svg>
        </button>

        {/* Image */}
        <div className="relative h-64">
          <Image
            src={project.image}
            alt={project.title}
            fill
            sizes="(max-width: 768px) 100vw, 800px"
            className="object-cover"
          />
          <div className="absolute inset-0 bg-gradient-to-t from-white via-white/50 to-transparent" />
        </div>

        {/* Content */}
        <div className="p-6 -mt-16 relative">
          <h2 id="modal-title" className="text-3xl font-bold text-text-primary mb-2">
            {project.title}
          </h2>

          {/* Meta */}
          <div className="flex flex-wrap gap-4 mb-6 text-sm">
            <span className="text-text-secondary">
              {labels.type}: {project.type}
            </span>
            <span className="text-text-secondary">
              {labels.duration}: {project.duration}
            </span>
            <span className="text-text-secondary">
              {labels.status}: {project.status}
            </span>
          </div>

          {/* Description */}
          <div className="mb-6">
            <h3 className="text-lg font-semibold text-text-primary mb-2">{labels.overview}</h3>
            <p className="text-accent-shadow leading-relaxed">{project.longDescription}</p>
          </div>

          {/* Role */}
          <div className="mb-6">
            <h3 className="text-lg font-semibold text-text-primary mb-2">{labels.role}</h3>
            <p className="text-accent-shadow">{project.role}</p>
          </div>

          {/* Learning */}
          <div className="mb-6">
            <h3 className="text-lg font-semibold text-text-primary mb-2">{labels.learning}</h3>
            <p className="text-accent-shadow">{project.learning}</p>
          </div>

          {/* Technologies */}
          <div className="mb-6">
            <h3 className="text-lg font-semibold text-text-primary mb-2">{labels.technologies}</h3>
            <div className="flex flex-wrap gap-2">
              {project.fullTechStack.map((tech) => (
                <span
                  key={tech}
                  className="px-3 py-1 rounded-full bg-bg-secondary text-text-primary text-sm"
                >
                  {tech}
                </span>
              ))}
            </div>
          </div>

          {/* Links */}
          <div className="flex gap-4">
            {project.url && (
              <a
                href={project.url}
                target="_blank"
                rel="noopener noreferrer"
                className="px-6 py-2 rounded-lg bg-neon-cyan text-white font-medium hover:bg-neon-cyan/90 transition-colors"
              >
                {labels.viewLive}
              </a>
            )}
            {project.github &&
              (typeof project.github === "string" ? (
                <a
                  href={project.github}
                  target="_blank"
                  rel="noopener noreferrer"
                  className="px-6 py-2 rounded-lg border border-text-primary/50 text-text-primary hover:bg-neon-cyan/10 transition-colors"
                >
                  {labels.viewSource}
                </a>
              ) : (
                project.github.map((repo) => (
                  <a
                    key={repo.label}
                    href={repo.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="px-6 py-2 rounded-lg border border-text-primary/50 text-text-primary hover:bg-neon-cyan/10 transition-colors"
                  >
                    {repo.label}
                  </a>
                ))
              ))}
          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/components/sections/Projects/Projects.tsx">
"use client";

import { useState } from "react";
import { content, type ProjectItem } from "@/content";
import { Section } from "@/components/layout/Section";
import { ProjectCard } from "./ProjectCard";
import { ProjectModal } from "./ProjectModal";

export function Projects() {
  const projects = content.projects;
  const [selectedProject, setSelectedProject] = useState<ProjectItem | null>(null);

  return (
    <Section id="projects">
      <div className="w-full max-w-6xl mx-auto">
        <h2 className="text-4xl md:text-5xl font-bold text-text-primary text-center mb-12">
          {projects.title}
        </h2>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {projects.items.map((project, index) => (
            <ProjectCard
              key={index}
              title={project.title}
              description={project.description}
              techStack={project.techStack}
              image={project.image}
              onClick={() => setSelectedProject(project)}
            />
          ))}
        </div>
      </div>

      <ProjectModal project={selectedProject} onClose={() => setSelectedProject(null)} />
    </Section>
  );
}
</file>

<file path="src/components/water/AnimatedWaterCanvas.tsx">
"use client";

import { Suspense, useEffect, useRef, useState, useMemo, useSyncExternalStore } from "react";
import { Canvas, useFrame, useThree } from "@react-three/fiber";
import * as THREE from "three";
import { WaterPlane } from "./WaterPlane";
import { createMultiTextCanvas, updateMultiTextCanvas, TextItem } from "./TextCanvas";
import { useFluidSimulation } from "@/hooks/useFluidSimulation";
import { useMousePosition } from "@/hooks/useMousePosition";
import { useIsMobile } from "@/hooks/useMediaQuery";
import { useMounted } from "@/hooks/useMounted";

// External store for reduced motion preference
function subscribeToReducedMotion(callback: () => void) {
  const mediaQuery = window.matchMedia("(prefers-reduced-motion: reduce)");
  mediaQuery.addEventListener("change", callback);
  return () => mediaQuery.removeEventListener("change", callback);
}

function getReducedMotionSnapshot() {
  return window.matchMedia("(prefers-reduced-motion: reduce)").matches;
}

function getReducedMotionServerSnapshot() {
  return false;
}

interface AnimatedSceneProps {
  isMobile: boolean;
  name: string;
  bgColor: string;
  nameColor: string;
  scale?: number;
}

/**
 * Inner scene component - GPU fluid simulation with animated canvas texture
 * Simplified: Only renders "Da'portfolio" text at bottom center
 */
function AnimatedScene({ isMobile, name, bgColor, nameColor, scale = 10.0 }: AnimatedSceneProps) {
  const { getTexture, addRipple } = useFluidSimulation({
    resolution: isMobile ? 256 : 512,
  });

  const { size } = useThree();
  const [contentTexture, setContentTexture] = useState<THREE.CanvasTexture | null>(null);
  const canvasRef = useRef<HTMLCanvasElement | null>(null);
  const textureRef = useRef<THREE.CanvasTexture | null>(null);
  const mousePosition = useMousePosition();
  const lastRipplePosRef = useRef({ x: 0, y: 0 });

  // Memoize text item - single "Da'portfolio" at bottom center
  const textItem = useMemo(
    (): TextItem => ({
      id: "name",
      text: name,
      x: 0.5, // Center horizontally
      y: 0.5, // Position at center (0.5 = 50% from top)
      fontSize: isMobile ? 34 : 90,
      fontFamily: '"Style Script", cursive',
      color: nameColor,
      opacity: 1,
      align: "center",
      baseline: "middle",
      // Silver Mist glow effect (subtle metallic shine)
      glowColor: "#cbd5e1",
      glowBlur: 40,
    }),
    [name, isMobile, nameColor]
  );

  // Create canvas and texture on mount/resize
  useEffect(() => {
    const dpr = window.devicePixelRatio || 1;
    const items = [textItem];

    const canvas = createMultiTextCanvas({
      width: size.width,
      height: size.height,
      items,
      bgColor,
      devicePixelRatio: dpr,
    });

    canvasRef.current = canvas;

    const texture = new THREE.CanvasTexture(canvas);
    texture.minFilter = THREE.LinearFilter;
    texture.magFilter = THREE.LinearFilter;
    texture.format = THREE.RGBAFormat;
    texture.needsUpdate = true;

    textureRef.current = texture;
    setContentTexture(texture);

    return () => {
      texture.dispose();
    };
  }, [size.width, size.height, bgColor, textItem]);

  // Update canvas texture (for any future animation needs)
  useFrame(() => {
    if (!canvasRef.current || !textureRef.current) return;

    const dpr = window.devicePixelRatio || 1;
    const items = [textItem];

    updateMultiTextCanvas(canvasRef.current, items, bgColor, dpr);
    textureRef.current.needsUpdate = true;
  });

  // Handle click ripples
  useEffect(() => {
    const handleClick = (e: MouseEvent) => {
      const rawX = e.clientX / window.innerWidth;
      const rawY = 1 - e.clientY / window.innerHeight;

      // Apply zoom transformation to UVs to match the scaled mesh
      // Center of zoom is 0.5, 0.5
      const x = (rawX - 0.5) / scale + 0.5;
      const y = (rawY - 0.5) / scale + 0.5;

      // CONFIG: Click Ripple Intensity
      // 3rd argument is intensity (larger = stronger ripple)
      addRipple(x, y, 1.5);
    };

    window.addEventListener("click", handleClick);
    return () => window.removeEventListener("click", handleClick);
  }, [addRipple, scale]);

  // Add cursor trail ripples
  useFrame(() => {
    if (!mousePosition.isActive) return;

    // Apply zoom transformation to current mouse position
    const currentX = (mousePosition.x - 0.5) / scale + 0.5;
    const currentY = (mousePosition.y - 0.5) / scale + 0.5;

    const dx = currentX - lastRipplePosRef.current.x;
    const dy = currentY - lastRipplePosRef.current.y;
    const distSq = dx * dx + dy * dy;

    if (distSq > 0.00001) {
      // CONFIG: Mouse Move Ripple Intensity
      addRipple(currentX, currentY, 0.4);
      lastRipplePosRef.current = { x: currentX, y: currentY };
    }
  });

  return (
    <WaterPlane getSimulationTexture={getTexture} contentTexture={contentTexture} scale={scale} />
  );
}

export interface AnimatedWaterCanvasProps {
  name: string;
  bgColor?: string;
  nameColor?: string;
}

/**
 * Simplified animated water canvas
 * Only displays "Da'portfolio" text at bottom with water ripple effect
 */
export function AnimatedWaterCanvas({
  name,
  bgColor = "#f1f5f9", // Silver Mist Background (Slate 100)
  nameColor = "#0f172a", // Slate 900 - Dark Text
}: AnimatedWaterCanvasProps) {
  const mounted = useMounted();
  const isMobile = useIsMobile();
  const prefersReducedMotion = useSyncExternalStore(
    subscribeToReducedMotion,
    getReducedMotionSnapshot,
    getReducedMotionServerSnapshot
  );

  if (!mounted || prefersReducedMotion) {
    return null;
  }

  return (
    <div className="fixed inset-0 z-0" aria-hidden="true" role="presentation">
      <Canvas
        dpr={isMobile ? 1 : [1, 2]}
        frameloop="always"
        gl={{
          antialias: false,
          alpha: true,
          powerPreference: "high-performance",
          failIfMajorPerformanceCaveat: true,
        }}
        // CONFIG: Camera setup
        camera={{ position: [0, 0, 5], fov: 50 }}
      >
        <Suspense fallback={null}>
          <AnimatedScene
            isMobile={isMobile}
            name={name}
            bgColor={bgColor}
            nameColor={nameColor}
            // CONFIG: Zoom Level - Adjust scale prop to zoom in/out (e.g. 1.25 = 125% zoom)
            scale={2}
          />
        </Suspense>
      </Canvas>
    </div>
  );
}
</file>

<file path="src/components/water/BackgroundWaves.tsx">
"use client";

import { useRef, useMemo } from "react";
import { useFrame, useThree } from "@react-three/fiber";
import * as THREE from "three";

const waveVertexShader = /* glsl */ `
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`;

const waveFragmentShader = /* glsl */ `
uniform float uTime;
uniform vec3 uColorA;
uniform vec3 uColorB;
uniform vec3 uColorC;

varying vec2 vUv;

void main() {
  // Multiple wave layers for organic movement
  float wave1 = sin(vUv.x * 3.0 + uTime * 0.5) * 0.5 + 0.5;
  float wave2 = sin(vUv.y * 2.0 + uTime * 0.3) * 0.5 + 0.5;
  float wave3 = sin((vUv.x + vUv.y) * 4.0 + uTime * 0.4) * 0.5 + 0.5;
  float wave4 = cos(vUv.x * 5.0 - uTime * 0.6) * sin(vUv.y * 4.0 + uTime * 0.5) * 0.5 + 0.5;

  float combinedWave = (wave1 + wave2 + wave3 + wave4) / 4.0;

  // Vertical gradient
  float gradient = vUv.y * 0.6 + 0.2;

  // Three-color mix for natural terrarium look
  vec3 midColor = mix(uColorA, uColorB, gradient);
  vec3 color = mix(midColor, uColorC, combinedWave * 0.35);

  // Add subtle organic shimmer (like light through leaves)
  float shimmer = sin(vUv.x * 15.0 + uTime * 2.0) * sin(vUv.y * 12.0 - uTime * 1.5);
  color += uColorC * shimmer * 0.04;

  // Softer opacity for natural atmosphere
  gl_FragColor = vec4(color, 0.10);
}
`;

/**
 * Subtle animated wave background layer
 * Creates terrarium atmosphere with gentle organic color shifts
 * Updated with terrarium natural color palette
 */
export function BackgroundWaves() {
  const materialRef = useRef<THREE.ShaderMaterial>(null);
  const { viewport } = useThree();

  const shaderMaterial = useMemo(() => {
    return new THREE.ShaderMaterial({
      vertexShader: waveVertexShader,
      fragmentShader: waveFragmentShader,
      uniforms: {
        uTime: { value: 0 },
        // Deep Earth - darkest (rich soil)
        uColorA: { value: new THREE.Color("#0D0A08") },
        // Forest Shadow - mid tone
        uColorB: { value: new THREE.Color("#161A13") },
        // Moss Green - highlight
        uColorC: { value: new THREE.Color("#566B4D") },
      },
      transparent: true,
      depthWrite: false,
    });
  }, []);

  useFrame((state) => {
    if (materialRef.current) {
      materialRef.current.uniforms.uTime.value = state.clock.elapsedTime;
    }
  });

  return (
    <mesh position={[0, 0, -5]}>
      <planeGeometry
        args={[viewport.width * 1.5, viewport.height * 1.5, 1, 1]}
      />
      <primitive object={shaderMaterial} ref={materialRef} attach="material" />
    </mesh>
  );
}
</file>

<file path="src/components/water/TextCanvas.ts">
/**
 * TextCanvas - Canvas 2D text renderer utility for water ripple effect
 * Renders text to a canvas that will be distorted by the water simulation
 * Supports multiple text items with individual positions for scroll animations
 */

// Single text item with position and styling
export interface TextItem {
  id: string;
  text: string;
  /** X position: 0-1 normalized (0=left, 0.5=center, 1=right) */
  x: number;
  /** Y position: 0-1 normalized (0=top, 0.5=center, 1=bottom) */
  y: number;
  fontSize: number;
  fontFamily?: string;
  color?: string;
  opacity?: number;
  align?: CanvasTextAlign;
  baseline?: CanvasTextBaseline;
  glowColor?: string;
  glowBlur?: number;
  revealProgress?: number; // 0 to 1, for typewriter effect without layout shift
}

// Legacy single-text options (backward compatible)
export interface TextCanvasOptions {
  width: number;
  height: number;
  text: string;
  fontSize?: number;
  fontFamily?: string;
  textColor?: string;
  bgColor?: string;
  devicePixelRatio?: number;
}

// Multi-text options for animated scenes
export interface MultiTextCanvasOptions {
  width: number;
  height: number;
  items: TextItem[];
  bgColor?: string;
  devicePixelRatio?: number;
}

/**
 * Creates a canvas with centered text for use as a texture
 * Scales by devicePixelRatio for crisp rendering on high-DPI displays
 */
export function createTextCanvas(options: TextCanvasOptions): HTMLCanvasElement {
  const {
    width,
    height,
    text,
    fontSize = 120,
    fontFamily = "Inter, system-ui, sans-serif",
    textColor = "#0f172a", // Silver Mist Dark Text
    bgColor = "#f1f5f9", // Silver Mist Light Background
    devicePixelRatio = typeof window !== "undefined" ? window.devicePixelRatio : 1,
  } = options;

  // Create canvas with DPI scaling
  const canvas = document.createElement("canvas");
  const scaledWidth = width * devicePixelRatio;
  const scaledHeight = height * devicePixelRatio;

  canvas.width = scaledWidth;
  canvas.height = scaledHeight;
  canvas.style.width = `${width}px`;
  canvas.style.height = `${height}px`;

  const ctx = canvas.getContext("2d", { alpha: true });
  if (!ctx) {
    throw new Error("Failed to get 2D context");
  }

  // Fill background
  ctx.fillStyle = bgColor;
  ctx.fillRect(0, 0, scaledWidth, scaledHeight);

  // Configure text rendering
  const scaledFontSize = Math.round(fontSize * devicePixelRatio);
  ctx.fillStyle = textColor;
  ctx.font = `bold ${scaledFontSize}px ${fontFamily}`;
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  
  // CONFIG: Default Static Text Glow
  // Uncomment to enable glow for static text too
  // ctx.shadowColor = "#ffffff";
  // ctx.shadowBlur = 20 * devicePixelRatio;

  ctx.imageSmoothingEnabled = true;
  ctx.imageSmoothingQuality = "high";

  // Draw centered text
  ctx.fillText(text, scaledWidth / 2, scaledHeight / 2);

  return canvas;
}

/**
 * Updates an existing canvas with new text content
 * Useful for dynamic text changes without recreating the canvas
 */
export function updateTextCanvas(
  canvas: HTMLCanvasElement,
  options: Omit<TextCanvasOptions, "width" | "height">
): void {
  const {
    text,
    fontSize = 120,
    fontFamily = "Inter, system-ui, sans-serif",
    textColor = "#0f172a",
    bgColor = "#f1f5f9",
    devicePixelRatio = typeof window !== "undefined" ? window.devicePixelRatio : 1,
  } = options;

  const ctx = canvas.getContext("2d");
  if (!ctx) return;

  const width = canvas.width;
  const height = canvas.height;

  // Clear and fill background
  ctx.fillStyle = bgColor;
  ctx.fillRect(0, 0, width, height);

  // Configure and draw text
  const scaledFontSize = Math.round(fontSize * devicePixelRatio);
  ctx.fillStyle = textColor;
  ctx.font = `bold ${scaledFontSize}px ${fontFamily}`;
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.imageSmoothingEnabled = true;
  ctx.imageSmoothingQuality = "high";

  ctx.fillText(text, width / 2, height / 2);
}

/**
 * Creates a canvas with multiple text items at specified positions
 * Each item can have different font, size, color, and position
 */
export function createMultiTextCanvas(options: MultiTextCanvasOptions): HTMLCanvasElement {
  const {
    width,
    height,
    items,
    bgColor = "#f1f5f9", // Silver Mist Light Background
    devicePixelRatio = typeof window !== "undefined" ? window.devicePixelRatio : 1,
  } = options;

  const canvas = document.createElement("canvas");
  const scaledWidth = width * devicePixelRatio;
  const scaledHeight = height * devicePixelRatio;

  canvas.width = scaledWidth;
  canvas.height = scaledHeight;
  canvas.style.width = `${width}px`;
  canvas.style.height = `${height}px`;

  const ctx = canvas.getContext("2d", { alpha: true });
  if (!ctx) {
    throw new Error("Failed to get 2D context");
  }

  // Fill background
  ctx.fillStyle = bgColor;
  ctx.fillRect(0, 0, scaledWidth, scaledHeight);

  // Enable high-quality rendering
  ctx.imageSmoothingEnabled = true;
  ctx.imageSmoothingQuality = "high";

  // Draw each text item
  for (const item of items) {
    drawTextItem(ctx, item, scaledWidth, scaledHeight, devicePixelRatio);
  }

  return canvas;
}

/**
 * Updates existing canvas with new text items (for animation frames)
 * Clears and redraws all items - optimized for 60fps updates
 */
export function updateMultiTextCanvas(
  canvas: HTMLCanvasElement,
  items: TextItem[],
  bgColor: string = "#f1f5f9",
  devicePixelRatio: number = typeof window !== "undefined" ? window.devicePixelRatio : 1
): void {
  const ctx = canvas.getContext("2d");
  if (!ctx) return;

  const width = canvas.width;
  const height = canvas.height;

  // Clear and fill background
  ctx.fillStyle = bgColor;
  ctx.fillRect(0, 0, width, height);

  // Enable high-quality rendering
  ctx.imageSmoothingEnabled = true;
  ctx.imageSmoothingQuality = "high";

  // Draw each item
  for (const item of items) {
    drawTextItem(ctx, item, width, height, devicePixelRatio);
  }
}

/**
 * Internal: Draw single text item to canvas context
 */
function drawTextItem(
  ctx: CanvasRenderingContext2D,
  item: TextItem,
  canvasWidth: number,
  canvasHeight: number,
  dpr: number
): void {
  const {
    text,
    x,
    y,
    fontSize,
    fontFamily = '"Style Script", cursive',
    color = "#0f172a",
    opacity = 1,
    align = "center",
    baseline = "middle",
    glowColor,
    glowBlur = 0,
    revealProgress = 1, // Default to fully visible
  } = item;

  // Skip fully transparent items
  if (opacity <= 0) return;

  const scaledFontSize = Math.round(fontSize * dpr);
  ctx.font = `bold ${scaledFontSize}px ${fontFamily}`;

  // Measure full text width to ensure fixed layout
  // We need to calculate word positions manually to support word-by-word reveal
  // while keeping the sentence centered as a whole.
  const words = text.split(" ");
  const spaceWidth = ctx.measureText(" ").width;
  
  // Calculate total width and individual word widths
  let totalWidth = 0;
  const wordWidths = words.map(word => {
    const w = ctx.measureText(word).width;
    totalWidth += w;
    return w;
  });
  totalWidth += spaceWidth * (words.length - 1);

  // Determine starting X position based on alignment
  const originX = x * canvasWidth;
  const originY = y * canvasHeight;
  let startX = originX;

  if (align === "center") {
    startX = originX - totalWidth / 2;
  } else if (align === "right") {
    startX = originX - totalWidth;
  }
  // if left, startX = originX

  // Save context state
  ctx.save();
  ctx.globalAlpha = opacity;

  // Apply glow
  if (glowColor && glowBlur > 0) {
    ctx.shadowColor = glowColor;
    ctx.shadowBlur = glowBlur * dpr;
  }

  ctx.fillStyle = color;
  ctx.textBaseline = baseline;
  // We manually handle alignment by calculating startX, so set canvas align to left
  ctx.textAlign = "left"; 

  // Determine how many words to show with smooth fading
  const revealValue = revealProgress * words.length;

  // Draw words
  let currentX = startX;
  words.forEach((word, index) => {
    // Calculate opacity for this specific word
    // It becomes visible when revealValue passes its index
    // We can add a "fade duration" of e.g. 1.0 unit (one word length)
    // revealValue = 3.5 means words 0,1,2 are opacity 1, word 3 is opacity 0.5
    const wordOpacity = Math.min(1, Math.max(0, revealValue - index));

    if (wordOpacity > 0.01) {
      ctx.save();
      ctx.globalAlpha = opacity * wordOpacity;
      
      // Apply shadow per word to avoid overlapping shadow artifacts if necessary
      // But typically shadow on context is fine. 
      // Careful: global shadow is set on parent context. 
      // With varying opacity, the shadow opacity will scale with globalAlpha automatically in simplified canvas logic.
      
      ctx.fillText(word, currentX, originY);
      ctx.restore();
    }
    
    currentX += wordWidths[index] + spaceWidth;
  });

  // Restore context
  ctx.restore();
}
</file>

<file path="src/shaders/particles.ts">
// Particle shaders for ambient floating particles
// Updated with terrarium natural color palette

export const particleVertexShader = /* glsl */ `
uniform float uTime;
uniform float uPixelRatio;
uniform float uSize;

attribute float aScale;
attribute float aPhase;

varying float vAlpha;
varying float vPhase;

// Simple noise function for organic movement
float noise(vec3 p) {
  return sin(p.x * 1.5) * cos(p.y * 1.3) * sin(p.z * 1.1);
}

void main() {
  vec3 pos = position;

  // Organic drift using noise
  float noiseX = noise(pos + vec3(uTime * 0.1, 0.0, 0.0));
  float noiseY = noise(pos + vec3(0.0, uTime * 0.15, 0.0));
  float noiseZ = noise(pos + vec3(0.0, 0.0, uTime * 0.08));

  pos.x += sin(uTime * 0.5 + aPhase) * 0.3 + noiseX * 0.5;
  pos.y += cos(uTime * 0.3 + aPhase * 1.3) * 0.2 + noiseY * 0.3;
  pos.z += sin(uTime * 0.2 + aPhase * 0.7) * 0.1 + noiseZ * 0.2;

  vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
  vec4 viewPosition = viewMatrix * modelPosition;
  vec4 projectedPosition = projectionMatrix * viewPosition;

  gl_Position = projectedPosition;
  gl_PointSize = uSize * aScale * uPixelRatio * (1.0 / -viewPosition.z);

  // Fade based on position
  float distanceFromCenter = length(position.xy) / 10.0;
  vAlpha = smoothstep(1.0, 0.3, distanceFromCenter) * 0.7;
  vPhase = aPhase;
}
`;

export const particleFragmentShader = /* glsl */ `
uniform vec3 uColor;
uniform float uTime;

varying float vAlpha;
varying float vPhase;

void main() {
  // Circular particle shape
  float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
  if (distanceToCenter > 0.5) discard;

  // Soft edge with glow
  float alpha = smoothstep(0.5, 0.1, distanceToCenter) * vAlpha;

  // Pulsing glow effect
  float pulse = sin(uTime * 2.0 + vPhase * 3.0) * 0.3 + 0.7;
  alpha *= pulse;

  // Core brightness (brighter center)
  float core = smoothstep(0.3, 0.0, distanceToCenter);
  vec3 finalColor = uColor + vec3(core * 0.3);

  gl_FragColor = vec4(finalColor, alpha);
}
`;
</file>

<file path="src/styles/navbar.css">
/* Skip Link (Accessibility) - Silver Mist */
.skip-link {
  position: absolute;
  left: -9999px;
  z-index: 999;
  padding: 1rem;
  background: var(--bg-primary);
  color: var(--text-primary);
  border: 2px solid var(--text-primary);
  box-shadow: 0 0 15px rgba(15, 23, 42, 0.2);
}

.skip-link:focus {
  left: 50%;
  transform: translateX(-50%);
  top: 0;
}
</file>

<file path="docs/codebase-summary.md">
# DaPortfolio v4.0 - Codebase Summary

**Total Files:** 56 TypeScript/TSX files
**Total LOC:** ~4,400 lines
**Last Updated:** 2026-01-29

## Directory Structure

```
src/
├── app/                           # Next.js App Router (5 files, ~300 LOC)
│   ├── page.tsx                   # Root page / dashboard
│   ├── layout.tsx                 # Root layout with globals CSS
│   ├── globals.css                # 197 LOC - Design system + theme
│   ├── sitemap.ts                 # SEO sitemap generation
│   └── manifest.ts                # PWA manifest
│
├── components/                    # React components (30+ files, ~2,000 LOC)
│   ├── effects/                   # Visual effects components
│   │   ├── Caustics.tsx           # Underwater light patterns shader
│   │   ├── RainParticles.tsx      # GPU rain particle system
│   │   └── EcosystemLayer.tsx     # Combined effects renderer
│   │
│   ├── water/                     # Water simulation components
│   │   ├── WaterCanvas.tsx        # Main water renderer
│   │   ├── WaterPlane.tsx         # Water surface geometry
│   │   └── TextCanvas.ts          # Text-based water canvas
│   │
│   ├── particles/                 # Particle system components
│   │   └── AmbientParticles.tsx   # Floating noise-driven particles
│   │
│   ├── layout/                    # Layout system
│   │   ├── Navbar.tsx             # Navigation bar (mobile/desktop)
│   │   ├── Section.tsx            # Content section wrapper
│   │   ├── TopToolbar.tsx         # Toolbar component
│   │   └── navbar.css             # Navbar-specific styles
│   │
│   ├── sections/                  # Portfolio sections
│   │   ├── About/About.tsx        # About/skills section
│   │   ├── Projects/Projects.tsx  # Projects grid
│   │   ├── Contact/Contact.tsx    # Contact form
│   │   └── index.ts               # Export barrel
│   │
│   ├── story/                     # Hero story components
│   │   ├── HeroStory.tsx          # Main hero component
│   │   ├── RoleCarousel.tsx       # Role selection carousel
│   │   ├── StorySection.tsx       # Story display wrapper
│   │   └── index.ts               # Export barrel
│   │
│   ├── icons/                     # SVG icon components
│   │   ├── ArrowIcon.tsx
│   │   ├── GitHubIcon.tsx
│   │   └── ... (11 total icons)
│   │
│   └── utils/                     # Utility components
│       └── AxeReporter.tsx        # Accessibility testing wrapper
│
├── content/                       # Portfolio content (2 files, ~725 LOC)
│   ├── portfolio.ts               # 725 LOC - Centralized content data
│   │   ├── Navigation labels
│   │   ├── Hero content
│   │   ├── About section
│   │   ├── Education items
│   │   ├── Skills (5 categories)
│   │   ├── Certificates
│   │   ├── 10 Projects
│   │   └── Contact info (11 socials)
│   └── index.ts                   # Export barrel
│
├── hooks/                         # Custom React hooks (10 files, ~800 LOC)
│   ├── useFluidSimulation.ts      # GPU fluid dynamics (ping-pong FBO)
│   ├── useScrollStory.ts          # GSAP scroll timeline
│   ├── useScrollProgress.ts       # Scroll progress tracking
│   ├── useActiveSection.ts        # Intersection observer
│   ├── useGSAP.ts                 # GSAP animation setup
│   ├── useMediaQuery.ts           # Responsive breakpoints
│   ├── useIsMobile.ts             # Mobile detection (not found yet)
│   ├── usePerformanceMonitor.ts   # FPS monitoring + effect reduction
│   ├── useReducedMotion.ts        # Accessibility preference
│   ├── useMounted.ts              # Client-side mount detection
│   ├── useMousePosition.ts        # Mouse tracking
│   └── index.ts                   # Export barrel
│
├── shaders/                       # GLSL shader code (5 files, ~600 LOC)
│   ├── simulation.ts              # Fluid simulation vertex/fragment
│   ├── water.ts                   # Water surface rendering
│   ├── rain.ts                    # Rain particle shader
│   ├── particles.ts               # Ambient particle shader
│   └── caustics.ts                # Underwater light patterns (if exists)
│
├── lib/                           # Utility functions (1 file, ~30 LOC)
│   └── utils.ts                   # cn() class name merger
│
├── styles/                        # Global styles (2 files, ~250 LOC)
│   ├── globals.css                # 197 LOC (in app/)
│   └── navbar.css                 # Navbar-specific styles
│
└── types/                         # TypeScript interfaces (1 file, ~100 LOC)
    └── content.ts                 # Type definitions for portfolio.ts
```

## Key Files Reference

### Entry Points

| File | LOC | Purpose |
|------|-----|---------|
| `src/app/page.tsx` | ~150 | Main page, layout integration |
| `src/app/layout.tsx` | ~100 | Root layout, metadata, providers |
| `src/content/portfolio.ts` | 725 | Centralized content data |

### Core Hooks (Custom React)

| Hook | LOC | Purpose |
|------|-----|---------|
| `useFluidSimulation` | ~180 | GPU fluid sim, ripple API |
| `useScrollStory` | ~120 | GSAP scroll timeline setup |
| `usePerformanceMonitor` | ~100 | FPS tracking, effect reduction |
| `useActiveSection` | ~80 | Intersection Observer tracking |
| `useScrollProgress` | ~70 | Scroll position percentage |
| `useMediaQuery` | ~60 | CSS media query listener |
| `useReducedMotion` | ~40 | prefers-reduced-motion support |

### Components

| Component | Type | Purpose |
|-----------|------|---------|
| `WaterCanvas` | 3D | Main water simulation renderer |
| `RainParticles` | 3D | GPU particle rain system |
| `Caustics` | 3D | Underwater light pattern effect |
| `AmbientParticles` | 3D | Floating particles with noise |
| `Navbar` | Layout | Navigation (mobile/desktop) |
| `Section` | Layout | Content section wrapper |
| `About`, `Projects`, `Contact` | Section | Portfolio sections |
| `HeroStory` | Story | Main hero introduction |

### Shaders (GLSL)

| Shader | Type | Purpose |
|--------|------|---------|
| `simulation` | Compute | Fluid pressure-velocity update |
| `water` | Render | Surface visualization |
| `rain` | Compute+Render | Particle position + display |
| `particles` | Compute+Render | Ambient particle animation |

### Styles

| File | LOC | Scope |
|------|-----|-------|
| `globals.css` | 197 | Theme, design system, utilities |
| `navbar.css` | ~50 | Navbar-specific styles |

## Module Relationships

### Data Flow
```
portfolio.ts (content)
    ↓
Components (About, Projects, Contact)
    ↓
Next.js pages
    ↓
Browser render
```

### Effect Pipeline
```
useFluidSimulation (GPU state)
    ↓
useScrollProgress (scroll tracking)
    ↓
useScrollStory (GSAP timeline)
    ↓
Effects trigger on scroll
    ↓
Shaders render visuals
```

### Performance Management
```
usePerformanceMonitor (measures FPS)
    ↓
Checks device capability
    ↓
Conditionally reduces effects
    ↓
Updates useReducedMotion state
```

## Type Definitions

Located in `src/types/content.ts`:

```typescript
// Navigation
interface NavigationContent { ... }

// Hero section
interface HeroContent { ... }

// About section
interface AboutContent {
  basicInfo: BasicInfoContent
  education: { items: EducationItem[] }
  skills: { categories: SkillCategories }
  certificates: { items: CertificateGroup[] }
}

// Projects
interface ProjectItem { ... }

// Contact
interface ContactContent { ... }
```

## Design System Integration

### Color Palette (CSS Variables)
```css
--bg-primary: #f1f5f9        /* Slate 100 */
--text-primary: #0f172a      /* Slate 900 */
--text-body: #1e293b         /* Slate 800 */
--text-secondary: #64748b    /* Slate 500 */
--bg-surface: rgba(241, 245, 249, 0.7)
--bg-highlight: #ffffff
--accent-glow: #cbd5e1
--accent-shadow: #64748b
```

### Typography
```css
--font-luxurious-roman: "Luxurious Roman", serif
--font-style-script: "Style Script", cursive
--font-mono: "Geist Mono", monospace
```

### Tailwind v4 Theme Extension
Located in `@theme inline` block in `globals.css`:
- Semantic color tokens mapped to design system
- Custom font family definitions
- Legacy color aliases for backward compatibility

## Testing Structure

- Test runner: Jest 30.2.0
- React testing library integration
- jsdom environment
- Babel preset configuration for TypeScript/React

## Dependencies Summary

### Production
- next 16.1.1
- react 19.2.3, react-dom 19.2.3
- three 0.182.0
- @react-three/fiber 9.5.0
- @react-three/drei 10.7.7
- gsap 3.14.2, @gsap/react 2.1.2
- tailwindcss 4
- tailwind-merge 3.4.0
- clsx 2.1.1

### Development
- typescript 5 (strict mode)
- eslint 9, eslint-config-next 16.1.1
- prettier 3.7.4
- jest 30.2.0, babel-jest 30.2.0
- @testing-library/react 16.3.1
- @axe-core/react 4.11.0 (a11y)

## Performance Characteristics

- **Initial Load**: ~300KB JS (gzipped estimate)
- **GPU Memory**: ~256MB for FBO textures
- **Target FPS**: 60 on RTX 3060+, 45-50 on mid-range
- **Shader Compilation**: Async, effects disable if timeout

## Accessibility Features

- AxeReporter component for runtime testing
- Skip links in navbar
- Keyboard navigation for all controls
- Screen reader announcements via aria-live
- Reduced motion: animations disabled if prefers-reduced-motion
- Focus management: focus-ring utilities
- Touch targets: 44px minimum (48px mobile)
- Color contrast: WCAG AA compliant

## Build Outputs

- **Development**: Hot reload, source maps
- **Production**: Optimized, minified, tree-shaken
- **Sitemap**: Dynamic generation via sitemap.ts
- **Manifest**: PWA-ready via manifest.ts

## Next Steps for New Developers

1. Review `README.md` for quick setup
2. Read `code-standards.md` for conventions
3. Study `system-architecture.md` for component flow
4. Explore `src/content/portfolio.ts` to understand data structure
5. Review shader files to understand GPU rendering pipeline
6. Check `src/hooks/useFluidSimulation.ts` for advanced pattern
</file>

<file path="package.json">
{
  "name": "da-portfolio-v4",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "analyze": "set ANALYZE=true && next build",
    "lint": "eslint",
    "test": "jest",
    "test:coverage": "jest --coverage",
    "format": "prettier --write .",
    "format:check": "prettier --check ."
  },
  "dependencies": {
    "@gsap/react": "^2.1.2",
    "@react-three/drei": "^10.7.7",
    "@react-three/fiber": "^9.5.0",
    "clsx": "^2.1.1",
    "gsap": "^3.14.2",
    "next": "16.1.1",
    "react": "19.2.3",
    "react-dom": "19.2.3",
    "tailwind-merge": "^3.4.0",
    "three": "^0.182.0"
  },
  "devDependencies": {
    "@axe-core/react": "^4.11.0",
    "@babel/preset-env": "^7.28.5",
    "@babel/preset-react": "^7.28.5",
    "@babel/preset-typescript": "^7.28.5",
    "@next/bundle-analyzer": "^16.1.1",
    "@tailwindcss/postcss": "^4",
    "@testing-library/jest-dom": "^6.9.1",
    "@testing-library/react": "^16.3.1",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "@types/three": "^0.182.0",
    "babel-jest": "^30.2.0",
    "eslint": "^9",
    "eslint-config-next": "16.1.1",
    "eslint-config-prettier": "^10.1.8",
    "jest": "^30.2.0",
    "jest-environment-jsdom": "^30.2.0",
    "prettier": "^3.7.4",
    "tailwindcss": "^4",
    "typescript": "^5"
  }
}
</file>

<file path="src/app/globals.css">
@import "tailwindcss";

/* User Requested Fonts */
.style-script-regular {
  font-family: "Style Script", cursive;
  font-weight: 400;
  font-style: normal;
}

.luxurious-roman-regular {
  font-family: "Luxurious Roman", serif;
  font-weight: 400;
  font-style: normal;
}

/* Silver Mist Theme Palette - Semantic Naming */
:root {
  /* Functional Palette */
  --bg-primary: #f1f5f9;      /* Slate 100 - Main BG */
  --text-primary: #0f172a;    /* Slate 900 - Primary Text/Headings */
  --text-secondary: #64748b;  /* Slate 500 - Secondary Text/Subtitles */
  --text-body: #1e293b;       /* Slate 800 - Body Text */

  /* Surfaces */
  --bg-surface: rgba(241, 245, 249, 0.7); /* Slate 100 with alpha */
  --bg-secondary: #e2e8f0;    /* Slate 200 - Secondary BG */
  --bg-highlight: #ffffff;    /* White - Highlights */

  /* Accents */
  --accent-glow: #cbd5e1;     /* Slate 300 - Subtle Glow */
  --accent-shadow: #64748b;   /* Slate 500 - Shadows (User requested contrast update) */

  /* Legacy aliases mapping to new semantic names - to be removed after refactor */
  --color-deep-abyss: var(--bg-primary);
  --color-neon-cyan: var(--text-primary);
  --color-electric-blue: var(--text-secondary);
  --color-bright-silver: var(--text-body);
  --color-glass-surface: var(--bg-surface);
  --color-steel-dark: var(--bg-secondary);
  --color-chrome-highlight: var(--bg-highlight);
  --color-biolum-glow: var(--accent-glow);
  --color-abyss-shadow: var(--accent-shadow);

  /* Theme mapping */
  --background: var(--bg-primary);
  --foreground: var(--text-body);

  --color-accent-primary: var(--text-primary);
  --color-accent-secondary: var(--text-secondary);
  --color-accent-highlight: var(--bg-highlight);
}

@theme inline {
  /* Tailwind v4 theme extension - SILVER MIST PALETTE */
  --color-background: var(--bg-primary);
  --color-foreground: var(--text-body);

  /* Fonts */
  --font-style-script: "Style Script", cursive;
  --font-luxurious-roman: "Luxurious Roman", serif;
  --font-sans: "Luxurious Roman", serif;
  --font-mono: var(--font-geist-mono);

  /* Semantic Colors */
  --color-bg-primary: #f1f5f9;
  --color-text-primary: #0f172a;
  --color-text-secondary: #64748b;
  --color-text-body: #1e293b;
  --color-bg-surface: rgba(241, 245, 249, 0.7);
  --color-bg-secondary: #e2e8f0;
  --color-bg-highlight: #ffffff;
  --color-accent-glow: #cbd5e1;
  --color-accent-shadow: #64748b;

  /* Legacy Colors (for backward compatibility during refactor) */
  --color-deep-abyss: #f1f5f9;
  --color-neon-cyan: #0f172a;
  --color-electric-blue: #64748b;
  --color-bright-silver: #1e293b;
  --color-glass-surface: rgba(241, 245, 249, 0.7);
  --color-steel-dark: #e2e8f0;
  --color-chrome-highlight: #ffffff;
  --color-biolum-glow: #cbd5e1;

}

body {
  background: var(--bg-primary);
  color: var(--text-body);
  font-family: "Luxurious Roman", serif;
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

/* Safe area for mobile notch/home indicator */
.safe-area-pb {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

/* Ensure navbar doesn't overlap content */
@media (max-width: 767px) {
  main {
    padding-bottom: calc(64px + env(safe-area-inset-bottom, 0));
  }
}

/* Vertical text for navbar (desktop) */
.writing-mode-vertical {
  writing-mode: vertical-rl;
  text-orientation: mixed;
}

/* Reusable focus ring utility */
.focus-ring {
  @apply focus-visible:outline-2 focus-visible:outline-text-primary focus-visible:outline-offset-2;
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Custom scrollbar for Silver Mist theme */
/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--accent-shadow) var(--bg-primary);
}

/* Chrome, Edge, Safari */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--bg-primary);
}

::-webkit-scrollbar-thumb {
  background: var(--accent-glow);
  border-radius: 4px;
  border: 1px solid var(--accent-shadow);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--accent-shadow);
  box-shadow: 0 0 10px var(--accent-shadow);
}

/* Screen reader only utilities */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.sr-only-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Touch targets optimization */
button,
a,
[role="button"] {
  min-height: 44px;
  min-width: 44px;
}

@media (max-width: 767px) {
  .nav-item {
    min-height: 48px;
    min-width: 48px;
  }
}
</file>

<file path="src/components/story/HeroStory.tsx">
"use client";

import { content } from "@/content";
import { useIsMobile } from "@/hooks";
import { useReducedMotion } from "@/hooks/useReducedMotion";
import { AnimatedWaterEffects } from "@/components/water";

/**
 * Hero section with water ripple effect
 * - Simplified: Only displays "Da'portfolio" text at bottom center
 * - Water ripple effect responds to mouse interaction
 * - No scroll animations or role carousel
 */
export function HeroStory() {
  const isMobile = useIsMobile();
  const prefersReducedMotion = useReducedMotion();

  const hero = content.hero;

  // Reduced motion fallback: static display
  if (prefersReducedMotion) {
    return (
      <section
        id="home"
        className="min-h-screen flex flex-col items-center justify-end pb-24 relative bg-bg-primary"
        aria-labelledby="hero-heading"
      >
        <h1
          id="hero-heading"
          className="text-6xl md:text-8xl font-style-script text-text-primary"
          style={{ fontFamily: '"Style Script", cursive' }}
        >
          {hero.name}
        </h1>
      </section>
    );
  }

  // Mobile: Simple static layout with water effect
  if (isMobile) {
    return (
      <section
        id="home"
        className="min-h-screen flex flex-col items-center justify-center relative"
        aria-labelledby="hero-heading"
      >
        {/* Water effect background with text inside */}
        <div className="absolute inset-0 z-0">
          <AnimatedWaterEffects name={hero.name} nameColor="#0f172a" />
        </div>

        {/* Screen reader only text */}
        <h1 id="hero-heading" className="sr-only">
          {hero.name}
        </h1>
      </section>
    );
  }

  // Desktop: Water effect with interactive ripples
  return (
    <section
      id="home"
      className="min-h-screen relative overflow-hidden"
      aria-labelledby="hero-heading"
    >
      {/* Water effect with "Da'portfolio" text positioned at bottom */}
      <div className="absolute inset-0 z-0">
        <AnimatedWaterEffects name={hero.name} nameColor="#0f172a" />
      </div>

      {/* Screen reader only text */}
      <h1 id="hero-heading" className="sr-only">
        {hero.name}
      </h1>
    </section>
  );
}
</file>

<file path="src/hooks/index.ts">
export { useMediaQuery, useIsMobile } from "./useMediaQuery";
export { useMounted } from "./useMounted";
export { useMousePosition } from "./useMousePosition";
export { useFluidSimulation } from "./useFluidSimulation";
export { usePerformanceMonitor } from "./usePerformanceMonitor";
export { useReducedMotion } from "./useReducedMotion";
export { useScrollStory } from "./useScrollStory";
export { useScrollProgress } from "./useScrollProgress";
export { gsap, ScrollTrigger } from "./useGSAP";
</file>

<file path="src/shaders/water.ts">
// Water Render Shader - Canvas texture distortion with specular highlights
// Uses simulation output (pressure, velocity, dx, dy) to distort content texture

export const renderVertexShader = /* glsl */ `
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`;

export const renderFragmentShader = /* glsl */ `
uniform sampler2D uSimulationMap;  // Simulation output (R=pressure, G=vel, B=dx, A=dy)
uniform sampler2D uContentTexture; // Canvas texture with text
uniform float uDistortionStrength; // Distortion intensity (0.3-0.5 typical)
uniform vec3 uLightColor;          // Color of the specular highlight

varying vec2 vUv;

void main() {
  // Sample simulation data
  vec4 simData = texture2D(uSimulationMap, vUv);

  // Extract distortion from dx/dy channels (B,A)
  vec2 distortion = uDistortionStrength * simData.zw;

  // Apply distortion to UV coordinates before sampling content
  vec2 distortedUv = vUv + distortion;

  // Clamp to prevent sampling outside texture bounds
  distortedUv = clamp(distortedUv, 0.0, 1.0);

  // Sample the content texture (text)
  vec4 color = texture2D(uContentTexture, distortedUv);

  // Calculate surface normal from gradients for specular
  vec3 normal = normalize(vec3(-simData.z * 2.0, 0.5, -simData.w * 2.0));

  // Light direction (top-right, slightly forward)
  vec3 lightDir = normalize(vec3(-3.0, 10.0, 3.0));

  // Specular highlight
  float specular = pow(max(0.0, dot(normal, lightDir)), 60.0);

  // Add specular to final color
  gl_FragColor = vec4(color.rgb + (uLightColor * specular), color.a);
}
`;
</file>

<file path="src/components/water/index.tsx">
"use client";

import dynamic from "next/dynamic";
import { useEffect, useState } from "react";

const WaterCanvasLazy = dynamic(() => import("./WaterCanvas").then((mod) => mod.WaterCanvas), {
  ssr: false,
  loading: () => null,
});

const AnimatedWaterCanvasLazy = dynamic(
  () => import("./AnimatedWaterCanvas").then((mod) => mod.AnimatedWaterCanvas),
  {
    ssr: false,
    loading: () => null,
  }
);

interface WaterEffectsProps {
  text?: string;
}

/**
 * Dynamic import wrapper for WaterCanvas
 * Prevents SSR issues with WebGL/Three.js and delays loading for performance
 */
export function WaterEffects({ text = "TrầnQuốcĐạt" }: WaterEffectsProps) {
  const [shouldLoad, setShouldLoad] = useState(false);

  useEffect(() => {
    // Delay loading by 100ms to allow critical content to paint first
    const timer = setTimeout(() => setShouldLoad(true), 100);
    return () => clearTimeout(timer);
  }, []);

  if (!shouldLoad) return null;

  return <WaterCanvasLazy text={text} />;
}

interface AnimatedWaterEffectsProps {
  name: string;
  bgColor?: string;
  nameColor?: string;
}

/**
 * Dynamic import wrapper for AnimatedWaterCanvas
 * Simplified: Only displays name text at bottom with water ripple effect
 */
export function AnimatedWaterEffects({ name, bgColor, nameColor }: AnimatedWaterEffectsProps) {
  const [shouldLoad, setShouldLoad] = useState(false);

  useEffect(() => {
    const timer = setTimeout(() => setShouldLoad(true), 100);
    return () => clearTimeout(timer);
  }, []);

  if (!shouldLoad) return null;

  return <AnimatedWaterCanvasLazy name={name} bgColor={bgColor} nameColor={nameColor} />;
}
</file>

<file path="src/components/water/WaterCanvas.tsx">
"use client";

import { Suspense, useEffect, useRef, useState, useSyncExternalStore } from "react";
import { Canvas, useFrame, useThree } from "@react-three/fiber";
import * as THREE from "three";
import { WaterPlane } from "./WaterPlane";
import { createTextCanvas } from "./TextCanvas";
import { useFluidSimulation } from "@/hooks/useFluidSimulation";
import { useMousePosition } from "@/hooks/useMousePosition";
import { useIsMobile } from "@/hooks/useMediaQuery";
import { useMounted } from "@/hooks/useMounted";

// External store for reduced motion preference
function subscribeToReducedMotion(callback: () => void) {
  const mediaQuery = window.matchMedia("(prefers-reduced-motion: reduce)");
  mediaQuery.addEventListener("change", callback);
  return () => mediaQuery.removeEventListener("change", callback);
}

function getReducedMotionSnapshot() {
  return window.matchMedia("(prefers-reduced-motion: reduce)").matches;
}

function getReducedMotionServerSnapshot() {
  return false;
}

interface WaterSceneProps {
  isMobile: boolean;
  text: string;
  scale?: number;
}

/**
 * Inner scene component - GPU fluid simulation with canvas texture distortion
 */
function WaterScene({ isMobile, text, scale = 10.0 }: WaterSceneProps) {
  const { getTexture, addRipple } = useFluidSimulation({
    resolution: isMobile ? 256 : 512,
  });

  const { size } = useThree();
  const [contentTexture, setContentTexture] = useState<THREE.CanvasTexture | null>(null);
  const mousePosition = useMousePosition();
  const lastRipplePosRef = useRef({ x: 0, y: 0 });


  // Create canvas texture on mount and resize
  useEffect(() => {
    const dpr = window.devicePixelRatio || 1;
    const canvas = createTextCanvas({
      width: size.width,
      height: size.height,
      text: text,
      // CONFIG: Text Appearance Parameters
      fontSize: isMobile ? 48 : 120, // Adjust text size
      fontFamily: '"Style Script", cursive', // Change font family
      textColor: "#f0d1d4", // Match Navbar color (Warm Cream)
      bgColor: "#A3B18A", // Soft Sage (Bright Terrarium bg)
      devicePixelRatio: dpr,
    });

    const texture = new THREE.CanvasTexture(canvas);
    texture.minFilter = THREE.LinearFilter;
    texture.magFilter = THREE.LinearFilter;
    texture.format = THREE.RGBAFormat;
    texture.needsUpdate = true;

    setContentTexture(texture);

    return () => {
      texture.dispose();
    };
  }, [size.width, size.height, text, isMobile]);

  // Handle click ripples
  useEffect(() => {
    const handleClick = (e: MouseEvent) => {
      const rawX = e.clientX / window.innerWidth;
      const rawY = 1 - e.clientY / window.innerHeight;

      // Apply zoom transformation to UVs to match the scaled mesh
      // Center of zoom is 0.5, 0.5
      const x = (rawX - 0.5) / scale + 0.5;
      const y = (rawY - 0.5) / scale + 0.5;

      // CONFIG: Click Ripple Intensity
      // 3rd argument is intensity (larger = stronger ripple)
      addRipple(x, y, 1.5); // Stronger click ripple
    };

    window.addEventListener("click", handleClick);
    return () => window.removeEventListener("click", handleClick);
  }, [addRipple, scale]);

  // Add cursor trail ripples only when mouse moves
  useFrame(() => {
    if (!mousePosition.isActive) return;

    // Apply zoom transformation to current mouse position
    const currentX = (mousePosition.x - 0.5) / scale + 0.5;
    const currentY = (mousePosition.y - 0.5) / scale + 0.5;

    // Calculate distance moved since last ripple (in UV space)
    const dx = currentX - lastRipplePosRef.current.x;
    const dy = currentY - lastRipplePosRef.current.y;
    const distSq = dx * dx + dy * dy;

    // Only add ripple if moved more than threshold (prevents static pulsing)
    // Threshold ~0.00001 roughly corresponds to noticeable pixel movement
    if (distSq > 0.00001) {
      // CONFIG: Mouse Move Ripple Intensity
      // 3rd argument is intensity (0.4 = subtle trail)
      addRipple(currentX, currentY, 0.4);
      lastRipplePosRef.current = { x: currentX, y: currentY };
    }
  });

  return <WaterPlane getSimulationTexture={getTexture} contentTexture={contentTexture} scale={scale} />;
}

interface WaterCanvasProps {
  text?: string;
}

/**
 * Main water effects canvas - displays text under water with ripple distortion
 */
export function WaterCanvas({ text = "TrầnQuốcĐạt" }: WaterCanvasProps) {
  const mounted = useMounted();
  const isMobile = useIsMobile();
  const prefersReducedMotion = useSyncExternalStore(
    subscribeToReducedMotion,
    getReducedMotionSnapshot,
    getReducedMotionServerSnapshot
  );

  if (!mounted || prefersReducedMotion) {
    return null;
  }

  return (
    <div className="fixed inset-0 z-0" aria-hidden="true" role="presentation">
      <Canvas
        dpr={isMobile ? 1 : [1, 2]}
        frameloop="always"
        gl={{
          antialias: false,
          alpha: true,
          powerPreference: "high-performance",
          failIfMajorPerformanceCaveat: true,
        }}
        // CONFIG: Camera setup - Standard perspective
        camera={{ position: [0, 0, 0], fov: 50 }}
      >
        <Suspense fallback={null}>
          {/* CONFIG: Zoom Level - Adjust scale prop to zoom in/out (e.g. 1.25 = 125% zoom) */}
          <WaterScene isMobile={isMobile} text={text} scale={1.25} />
        </Suspense>
      </Canvas>
    </div>
  );
}
</file>

<file path="src/components/water/WaterPlane.tsx">
"use client";

import { useRef, useMemo } from "react";
import { useFrame, useThree } from "@react-three/fiber";
import * as THREE from "three";
import { renderVertexShader, renderFragmentShader } from "@/shaders/water";

interface WaterPlaneProps {
  getSimulationTexture: () => THREE.Texture | null;
  contentTexture: THREE.Texture | null;
  /** Scale factor for the water plane (1.0 = fit screen, >1.0 = zoom in) */
  scale?: number;
}

/**
 * Fullscreen plane mesh with water distortion shader
 * Distorts content texture based on simulation output
 */
export function WaterPlane({ getSimulationTexture, contentTexture, scale = 1.0 }: WaterPlaneProps) {
  const materialRef = useRef<THREE.ShaderMaterial>(null);
  const { viewport } = useThree();

  // Shader material for water rendering
  const shaderMaterial = useMemo(() => {
    return new THREE.ShaderMaterial({
      uniforms: {
        uSimulationMap: { value: null },
        uContentTexture: { value: null },
        uDistortionStrength: { value: 1.0 }, // Higher distortion for liquid metal feel
        uLightColor: { value: new THREE.Color("#ffffff") }, // Bright Silver / Liquid Mercury effect
      },
      vertexShader: renderVertexShader,
      fragmentShader: renderFragmentShader,
      transparent: true,
      depthWrite: false,
    });
  }, []);

  // Update textures each frame
  useFrame(() => {
    if (materialRef.current) {
      const simTexture = getSimulationTexture();
      if (simTexture) {
        materialRef.current.uniforms.uSimulationMap.value = simTexture;
      }
      if (contentTexture) {
        materialRef.current.uniforms.uContentTexture.value = contentTexture;
      }
    }
  });

  return (
    <mesh position={[0, 0, 0]} scale={[scale, scale, 1]}>
      <planeGeometry args={[viewport.width, viewport.height, 1, 1]} />
      <primitive object={shaderMaterial} ref={materialRef} attach="material" />
    </mesh>
  );
}
</file>

</files>
